{"ast":null,"code":"// Canton API - Uses ClearportX Backend\nimport{backendApi}from'./backendApi';class CantonService{constructor(){var _process$env$REACT_AP;this.initialized=false;this.config=void 0;this.authDisabled=((_process$env$REACT_AP=process.env.REACT_APP_AUTH_ENABLED)!==null&&_process$env$REACT_AP!==void 0?_process$env$REACT_AP:'false')!=='true';}initialize(config){this.initialized=true;this.config=config;console.log('Canton API initialized with backend at:',config.ledgerApiUrl);return this;}async isConnected(){try{if(this.authDisabled)return true;// DevNet/no-auth: always enable actions\nconst health=await backendApi.healthCheck();// Treat OK/SYNCING as connected during DevNet\nreturn health.status==='OK'||health.status==='SYNCING'||health.synced===true||health.poolsActive>0;}catch(_unused){return false;}}async getHealth(){return this.isConnected();}async queryContracts(templateType){// This is called by the real Canton API, redirect to backend\nreturn[];}async getTokens(party){try{if(!party){const currentUser=localStorage.getItem('current_user')||'alice@clearportx';return await backendApi.getTokens(currentUser);}return await backendApi.getTokens(party);}catch(error){console.error('Get tokens failed:',error);return[];}}async getPools(){try{return await backendApi.getPools();}catch(error){console.error('Get pools failed:',error);return[];}}async createContract(){return{contractId:'mock'};}async exerciseChoice(){return{result:'success'};}}// Export singleton instance\nconst cantonService=new CantonService();export const initializeCantonApi=config=>{return cantonService.initialize(config);};export const cantonApi={initialize:config=>cantonService.initialize(config),isConnected:()=>cantonService.isConnected(),getHealth:()=>cantonService.getHealth(),queryContracts:templateType=>cantonService.queryContracts(templateType),getTokens:party=>cantonService.getTokens(party),getPools:()=>cantonService.getPools(),createContract:()=>cantonService.createContract(),exerciseChoice:()=>cantonService.exerciseChoice()};export default cantonApi;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}