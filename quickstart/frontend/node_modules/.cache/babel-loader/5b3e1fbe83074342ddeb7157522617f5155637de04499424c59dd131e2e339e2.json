{"ast":null,"code":"var _jsxFileName = \"/root/canton-website/app/src/components/SwapInterface.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAppStore } from '../stores';\nimport { useContractStore } from '../stores/useContractStore';\nimport { backendApi } from '../services/backendApi';\nimport TokenSelector from './TokenSelector';\nimport SlippageSettings from './SlippageSettings';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SwapInterface = () => {\n  _s();\n  var _selectedTokens$from3, _selectedTokens$from4, _selectedTokens$to3, _selectedTokens$to3$b, _selectedTokens$from5, _selectedTokens$to4, _selectedTokens$from6;\n  const {\n    selectedTokens,\n    setSelectedTokens,\n    swapTokens: swapSelectedTokens,\n    isConnected,\n    slippage\n  } = useAppStore();\n  const [inputAmount, setInputAmount] = useState('');\n  const [outputAmount, setOutputAmount] = useState('');\n  const [tokens, setTokens] = useState([]);\n  const [quote, setQuote] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [calculating, setCalculating] = useState(false);\n  const [showFromSelector, setShowFromSelector] = useState(false);\n  const [showToSelector, setShowToSelector] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n\n  // Charger les tokens depuis les pools actifs + balances utilisateur\n  useEffect(() => {\n    const loadTokens = async () => {\n      try {\n        // 1. Get all active pools to extract available tokens\n        const pools = await backendApi.getPools();\n\n        // 2. Extract unique tokens from pools\n        const uniqueTokensMap = new Map();\n        pools.forEach(pool => {\n          if (!uniqueTokensMap.has(pool.tokenA.symbol)) {\n            uniqueTokensMap.set(pool.tokenA.symbol, {\n              ...pool.tokenA,\n              balance: 0\n            });\n          }\n          if (!uniqueTokensMap.has(pool.tokenB.symbol)) {\n            uniqueTokensMap.set(pool.tokenB.symbol, {\n              ...pool.tokenB,\n              balance: 0\n            });\n          }\n        });\n\n        // 3. Get user balances for these tokens\n        // TEMPORARY: Use public endpoint (hardcoded 'app-provider')\n        // TODO: Get party from authService.getParty() after OAuth login\n        const userTokens = await backendApi.getTokens('app-provider');\n\n        // 4. Merge pool tokens with user balances (default to 0 if user has no balance)\n        const tokensWithBalances = Array.from(uniqueTokensMap.values()).map(token => {\n          const userToken = userTokens.find(t => t.symbol === token.symbol);\n          return {\n            ...token,\n            balance: (userToken === null || userToken === void 0 ? void 0 : userToken.balance) || 0 // Show 0 if user has no balance\n          };\n        });\n        setTokens(tokensWithBalances);\n        useContractStore.getState().setTokens(tokensWithBalances);\n        console.log('✅ Loaded tokens from pools:', tokensWithBalances);\n      } catch (error) {\n        console.error('Error loading tokens:', error);\n        toast.error('Failed to load tokens from backend');\n      }\n    };\n    loadTokens();\n  }, []);\n\n  // Calculer le quote quand le montant change\n  useEffect(() => {\n    if (!selectedTokens.from || !selectedTokens.to || !inputAmount) {\n      setOutputAmount('');\n      setQuote(null);\n      return;\n    }\n    const calculateQuote = async () => {\n      setCalculating(true);\n      try {\n        const amount = parseFloat(inputAmount);\n        if (isNaN(amount) || amount <= 0) {\n          setOutputAmount('');\n          setQuote(null);\n          return;\n        }\n\n        // Use real backend API to calculate quote\n        const calculatedQuote = await backendApi.calculateSwapQuote({\n          poolId: '',\n          // Auto-discover by token pair\n          inputSymbol: selectedTokens.from.symbol,\n          outputSymbol: selectedTokens.to.symbol,\n          inputAmount: amount.toString()\n        });\n        if (calculatedQuote) {\n          setQuote(calculatedQuote);\n          setOutputAmount(calculatedQuote.outputAmount.toFixed(6));\n        } else {\n          setOutputAmount('');\n          setQuote(null);\n          toast.error('No pool found for this pair');\n        }\n      } catch (error) {\n        console.error('Error calculating quote:', error);\n        setOutputAmount('');\n        setQuote(null);\n      } finally {\n        setCalculating(false);\n      }\n    };\n    const timeout = setTimeout(calculateQuote, 500);\n    return () => clearTimeout(timeout);\n  }, [inputAmount, selectedTokens.from, selectedTokens.to]);\n  const handleSwap = async () => {\n    if (!selectedTokens.from || !selectedTokens.to || !inputAmount || !quote) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n    const amount = parseFloat(inputAmount);\n    if (isNaN(amount) || amount <= 0) {\n      toast.error('Please enter a valid amount');\n      return;\n    }\n    try {\n      setLoading(true);\n      const minOutput = quote.outputAmount * (1 - slippage / 100);\n\n      // Call real backend API - atomic swap\n      const response = await backendApi.executeAtomicSwap({\n        inputSymbol: selectedTokens.from.symbol,\n        outputSymbol: selectedTokens.to.symbol,\n        inputAmount: amount.toFixed(10),\n        // 10 decimal precision for DAML\n        minOutput: minOutput.toFixed(10),\n        maxPriceImpactBps: Math.round(slippage * 100) // 0.5% → 50 bps\n      });\n      toast.success(`Swap successful! Received ${parseFloat(response.amountOut).toFixed(4)} ${response.outputSymbol}`);\n\n      // Wait 2 seconds for PQS to synchronize before reloading tokens\n      await new Promise(resolve => setTimeout(resolve, 2000));\n\n      // Recharger les tokens pour mettre à jour les balances\n      // TEMPORARY: Use public endpoint (hardcoded 'alice')\n      // TODO: Get party from authService.getParty() after OAuth login\n      const updatedTokens = await backendApi.getTokens('alice');\n      setTokens(updatedTokens);\n      useContractStore.getState().setTokens(updatedTokens);\n      console.log('✅ Tokens refreshed after swap:', updatedTokens.filter(t => {\n        var _selectedTokens$from, _selectedTokens$to;\n        return t.symbol === ((_selectedTokens$from = selectedTokens.from) === null || _selectedTokens$from === void 0 ? void 0 : _selectedTokens$from.symbol) || t.symbol === ((_selectedTokens$to = selectedTokens.to) === null || _selectedTokens$to === void 0 ? void 0 : _selectedTokens$to.symbol);\n      }));\n\n      // Update selected tokens with new balances\n      const updatedFrom = updatedTokens.find(t => {\n        var _selectedTokens$from2;\n        return t.symbol === ((_selectedTokens$from2 = selectedTokens.from) === null || _selectedTokens$from2 === void 0 ? void 0 : _selectedTokens$from2.symbol);\n      });\n      const updatedTo = updatedTokens.find(t => {\n        var _selectedTokens$to2;\n        return t.symbol === ((_selectedTokens$to2 = selectedTokens.to) === null || _selectedTokens$to2 === void 0 ? void 0 : _selectedTokens$to2.symbol);\n      });\n      if (updatedFrom && updatedTo) {\n        setSelectedTokens({\n          from: updatedFrom,\n          to: updatedTo\n        });\n      }\n\n      // Reset form\n      setInputAmount('');\n      setOutputAmount('');\n      setQuote(null);\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response2, _error$response3, _error$response4;\n      console.error('Error executing swap:', error);\n\n      // Handle backend error responses\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.message) {\n        const errorMsg = error.response.data.message;\n\n        // Special handling for price impact errors\n        if (errorMsg.includes('price impact') || errorMsg.includes('slippage')) {\n          toast.error(`Price impact too high (${slippage}% slippage). Try increasing slippage tolerance in settings ⚙️`);\n        } else {\n          toast.error(`Swap failed: ${errorMsg}`);\n        }\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 429) {\n        toast.error('Rate limit exceeded. Please wait and try again.');\n      } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401) {\n        toast.error('Authentication required. Please connect your wallet.');\n      } else if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 400) {\n        toast.error('Invalid swap parameters. Try reducing amount or increasing slippage ⚙️');\n      } else {\n        toast.error('An error occurred during swap');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleTokenSwap = () => {\n    swapSelectedTokens();\n    setInputAmount('');\n    setOutputAmount('');\n    setQuote(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-glow bg-white dark:bg-dark-900 relative overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-mesh opacity-30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"heading-3\",\n            children: \"Swap Tokens\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"body-small\",\n            children: \"Trade tokens instantly with low fees\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowSettings(!showSettings),\n          className: \"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-800 transition-colors\",\n          title: \"Transaction Settings\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-gray-600 dark:text-gray-400\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative mb-4\",\n        children: /*#__PURE__*/_jsxDEV(SlippageSettings, {\n          onClose: () => setShowSettings(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"glass-subtle rounded-2xl p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small\",\n              children: \"From\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small\",\n              children: [\"Balance: \", ((_selectedTokens$from3 = selectedTokens.from) === null || _selectedTokens$from3 === void 0 ? void 0 : (_selectedTokens$from4 = _selectedTokens$from3.balance) === null || _selectedTokens$from4 === void 0 ? void 0 : _selectedTokens$from4.toFixed(4)) || '0.00']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowFromSelector(true),\n              className: \"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-dark-800 hover:bg-gray-200 dark:hover:bg-dark-700 transition-colors duration-200 min-w-fit whitespace-nowrap\",\n              children: selectedTokens.from ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/20 flex items-center justify-center font-bold text-primary-600 dark:text-primary-400 text-xs\",\n                  children: selectedTokens.from.symbol.charAt(0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold text-gray-900 dark:text-gray-100\",\n                  children: selectedTokens.from.symbol\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: \"Select token\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: inputAmount,\n              onChange: e => setInputAmount(e.target.value),\n              placeholder: \"0.0\",\n              className: \"flex-1 max-w-[220px] text-right text-2xl font-semibold bg-transparent border-none outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center -my-1 relative z-10\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleTokenSwap,\n          className: \"p-2 rounded-xl bg-white dark:bg-dark-900 border-4 border-gray-50 dark:border-dark-950 shadow-lg hover:shadow-glow transition-all duration-200 hover:rotate-180 transform hover:scale-110\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-gray-600 dark:text-gray-400\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"glass-subtle rounded-2xl p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small\",\n              children: \"To\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small\",\n              children: [\"Balance: \", ((_selectedTokens$to3 = selectedTokens.to) === null || _selectedTokens$to3 === void 0 ? void 0 : (_selectedTokens$to3$b = _selectedTokens$to3.balance) === null || _selectedTokens$to3$b === void 0 ? void 0 : _selectedTokens$to3$b.toFixed(4)) || '0.00']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowToSelector(true),\n              className: \"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-dark-800 hover:bg-gray-200 dark:hover:bg-dark-700 transition-colors duration-200 min-w-fit whitespace-nowrap\",\n              children: selectedTokens.to ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-6 h-6 rounded-full bg-success-100 dark:bg-success-900/20 flex items-center justify-center font-bold text-success-600 dark:text-success-400 text-xs\",\n                  children: selectedTokens.to.symbol.charAt(0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold text-gray-900 dark:text-gray-100\",\n                  children: selectedTokens.to.symbol\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: \"Select token\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 max-w-[220px] text-right text-2xl font-semibold text-gray-900 dark:text-gray-100\",\n              children: calculating ? '...' : outputAmount || '0.0'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), quote && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 glass-subtle rounded-xl p-4 space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between body-small\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 dark:text-gray-400\",\n            children: \"Rate:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-900 dark:text-gray-100\",\n            children: [\"1 \", (_selectedTokens$from5 = selectedTokens.from) === null || _selectedTokens$from5 === void 0 ? void 0 : _selectedTokens$from5.symbol, \" = \", (quote.outputAmount / quote.inputAmount).toFixed(4), \" \", (_selectedTokens$to4 = selectedTokens.to) === null || _selectedTokens$to4 === void 0 ? void 0 : _selectedTokens$to4.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between body-small\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 dark:text-gray-400\",\n            children: \"Price Impact:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `font-semibold ${quote.priceImpact > 5 ? 'text-error-600' : 'text-success-600'}`,\n            children: [quote.priceImpact.toFixed(2), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between body-small\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 dark:text-gray-400\",\n            children: \"Fee:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-900 dark:text-gray-100\",\n            children: [quote.fee.toFixed(6), \" \", (_selectedTokens$from6 = selectedTokens.from) === null || _selectedTokens$from6 === void 0 ? void 0 : _selectedTokens$from6.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between body-small\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 dark:text-gray-400\",\n            children: \"Slippage Tolerance:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-900 dark:text-gray-100\",\n            children: [slippage, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSwap,\n        disabled: loading || !isConnected || !selectedTokens.from || !selectedTokens.to || !inputAmount || !quote,\n        className: `w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center space-x-2 ${loading || !isConnected || !selectedTokens.from || !selectedTokens.to || !inputAmount || !quote ? 'bg-gray-200 dark:bg-dark-800 text-gray-400 dark:text-gray-600 cursor-not-allowed' : 'btn-primary'}`,\n        children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Swapping...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : !isConnected ? 'Connect Wallet' : 'Swap Tokens'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 grid grid-cols-3 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-success-500 mb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small font-medium\",\n              children: \"24h Volume\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm font-semibold text-gray-900 dark:text-gray-100\",\n            children: \"$2.4M\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-primary-500 mb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small font-medium\",\n              children: \"Avg Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm font-semibold text-gray-900 dark:text-gray-100\",\n            children: \"~2s\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-warning-500 mb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"body-small font-medium\",\n              children: \"Fee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm font-semibold text-gray-900 dark:text-gray-100\",\n            children: \"0.3%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TokenSelector, {\n      isOpen: showFromSelector,\n      onClose: () => setShowFromSelector(false),\n      onSelect: token => {\n        setSelectedTokens({\n          from: token\n        });\n        setShowFromSelector(false);\n      },\n      tokens: tokens,\n      selectedToken: selectedTokens.from,\n      type: \"from\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TokenSelector, {\n      isOpen: showToSelector,\n      onClose: () => setShowToSelector(false),\n      onSelect: token => {\n        setSelectedTokens({\n          to: token\n        });\n        setShowToSelector(false);\n      },\n      tokens: tokens,\n      selectedToken: selectedTokens.to,\n      type: \"to\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 5\n  }, this);\n};\n_s(SwapInterface, \"KChoOiz+i5/KXKWPOFk03yHVNd4=\", false, function () {\n  return [useAppStore];\n});\n_c = SwapInterface;\nexport default SwapInterface;\nvar _c;\n$RefreshReg$(_c, \"SwapInterface\");","map":{"version":3,"names":["React","useState","useEffect","useAppStore","useContractStore","backendApi","TokenSelector","SlippageSettings","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","SwapInterface","_s","_selectedTokens$from3","_selectedTokens$from4","_selectedTokens$to3","_selectedTokens$to3$b","_selectedTokens$from5","_selectedTokens$to4","_selectedTokens$from6","selectedTokens","setSelectedTokens","swapTokens","swapSelectedTokens","isConnected","slippage","inputAmount","setInputAmount","outputAmount","setOutputAmount","tokens","setTokens","quote","setQuote","loading","setLoading","calculating","setCalculating","showFromSelector","setShowFromSelector","showToSelector","setShowToSelector","showSettings","setShowSettings","loadTokens","pools","getPools","uniqueTokensMap","Map","forEach","pool","has","tokenA","symbol","set","balance","tokenB","userTokens","getTokens","tokensWithBalances","Array","from","values","map","token","userToken","find","t","getState","console","log","error","to","calculateQuote","amount","parseFloat","isNaN","calculatedQuote","calculateSwapQuote","poolId","inputSymbol","outputSymbol","toString","toFixed","timeout","setTimeout","clearTimeout","handleSwap","minOutput","response","executeAtomicSwap","maxPriceImpactBps","Math","round","success","amountOut","Promise","resolve","updatedTokens","filter","_selectedTokens$from","_selectedTokens$to","updatedFrom","_selectedTokens$from2","updatedTo","_selectedTokens$to2","_error$response","_error$response$data","_error$response2","_error$response3","_error$response4","data","message","errorMsg","includes","status","handleTokenSwap","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onClose","charAt","type","value","onChange","e","target","placeholder","priceImpact","fee","disabled","isOpen","onSelect","selectedToken","_c","$RefreshReg$"],"sources":["/root/canton-website/app/src/components/SwapInterface.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppStore } from '../stores';\nimport { useContractStore } from '../stores/useContractStore';\nimport { backendApi } from '../services/backendApi';\nimport { TokenInfo, SwapQuote } from '../types/canton';\nimport TokenSelector from './TokenSelector';\nimport SlippageSettings from './SlippageSettings';\nimport toast from 'react-hot-toast';\n\nconst SwapInterface: React.FC = () => {\n  const { selectedTokens, setSelectedTokens, swapTokens: swapSelectedTokens, isConnected, slippage } = useAppStore();\n  const [inputAmount, setInputAmount] = useState('');\n  const [outputAmount, setOutputAmount] = useState('');\n  const [tokens, setTokens] = useState<TokenInfo[]>([]);\n  const [quote, setQuote] = useState<SwapQuote | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [calculating, setCalculating] = useState(false);\n  const [showFromSelector, setShowFromSelector] = useState(false);\n  const [showToSelector, setShowToSelector] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n\n  // Charger les tokens depuis les pools actifs + balances utilisateur\n  useEffect(() => {\n    const loadTokens = async () => {\n      try {\n        // 1. Get all active pools to extract available tokens\n        const pools = await backendApi.getPools();\n\n        // 2. Extract unique tokens from pools\n        const uniqueTokensMap = new Map<string, TokenInfo>();\n        pools.forEach(pool => {\n          if (!uniqueTokensMap.has(pool.tokenA.symbol)) {\n            uniqueTokensMap.set(pool.tokenA.symbol, { ...pool.tokenA, balance: 0 });\n          }\n          if (!uniqueTokensMap.has(pool.tokenB.symbol)) {\n            uniqueTokensMap.set(pool.tokenB.symbol, { ...pool.tokenB, balance: 0 });\n          }\n        });\n\n        // 3. Get user balances for these tokens\n        // TEMPORARY: Use public endpoint (hardcoded 'app-provider')\n        // TODO: Get party from authService.getParty() after OAuth login\n        const userTokens = await backendApi.getTokens('app-provider');\n\n        // 4. Merge pool tokens with user balances (default to 0 if user has no balance)\n        const tokensWithBalances = Array.from(uniqueTokensMap.values()).map(token => {\n          const userToken = userTokens.find(t => t.symbol === token.symbol);\n          return {\n            ...token,\n            balance: userToken?.balance || 0, // Show 0 if user has no balance\n          };\n        });\n\n        setTokens(tokensWithBalances);\n        useContractStore.getState().setTokens(tokensWithBalances);\n\n        console.log('✅ Loaded tokens from pools:', tokensWithBalances);\n      } catch (error) {\n        console.error('Error loading tokens:', error);\n        toast.error('Failed to load tokens from backend');\n      }\n    };\n\n    loadTokens();\n  }, []);\n\n  // Calculer le quote quand le montant change\n  useEffect(() => {\n    if (!selectedTokens.from || !selectedTokens.to || !inputAmount) {\n      setOutputAmount('');\n      setQuote(null);\n      return;\n    }\n\n    const calculateQuote = async () => {\n      setCalculating(true);\n      try {\n        const amount = parseFloat(inputAmount);\n        if (isNaN(amount) || amount <= 0) {\n          setOutputAmount('');\n          setQuote(null);\n          return;\n        }\n\n        // Use real backend API to calculate quote\n        const calculatedQuote = await backendApi.calculateSwapQuote({\n          poolId: '', // Auto-discover by token pair\n          inputSymbol: selectedTokens.from!.symbol,\n          outputSymbol: selectedTokens.to!.symbol,\n          inputAmount: amount.toString(),\n        });\n\n        if (calculatedQuote) {\n          setQuote(calculatedQuote);\n          setOutputAmount(calculatedQuote.outputAmount.toFixed(6));\n        } else {\n          setOutputAmount('');\n          setQuote(null);\n          toast.error('No pool found for this pair');\n        }\n      } catch (error) {\n        console.error('Error calculating quote:', error);\n        setOutputAmount('');\n        setQuote(null);\n      } finally {\n        setCalculating(false);\n      }\n    };\n\n    const timeout = setTimeout(calculateQuote, 500);\n    return () => clearTimeout(timeout);\n  }, [inputAmount, selectedTokens.from, selectedTokens.to]);\n\n  const handleSwap = async () => {\n    if (!selectedTokens.from || !selectedTokens.to || !inputAmount || !quote) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    const amount = parseFloat(inputAmount);\n    if (isNaN(amount) || amount <= 0) {\n      toast.error('Please enter a valid amount');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const minOutput = quote.outputAmount * (1 - slippage / 100);\n\n      // Call real backend API - atomic swap\n      const response = await backendApi.executeAtomicSwap({\n        inputSymbol: selectedTokens.from.symbol,\n        outputSymbol: selectedTokens.to.symbol,\n        inputAmount: amount.toFixed(10),  // 10 decimal precision for DAML\n        minOutput: minOutput.toFixed(10),\n        maxPriceImpactBps: Math.round(slippage * 100),  // 0.5% → 50 bps\n      });\n\n      toast.success(`Swap successful! Received ${parseFloat(response.amountOut).toFixed(4)} ${response.outputSymbol}`);\n\n      // Wait 2 seconds for PQS to synchronize before reloading tokens\n      await new Promise(resolve => setTimeout(resolve, 2000));\n\n      // Recharger les tokens pour mettre à jour les balances\n      // TEMPORARY: Use public endpoint (hardcoded 'alice')\n      // TODO: Get party from authService.getParty() after OAuth login\n      const updatedTokens = await backendApi.getTokens('alice');\n      setTokens(updatedTokens);\n      useContractStore.getState().setTokens(updatedTokens);\n\n      console.log('✅ Tokens refreshed after swap:', updatedTokens.filter(t =>\n        t.symbol === selectedTokens.from?.symbol || t.symbol === selectedTokens.to?.symbol\n      ));\n\n      // Update selected tokens with new balances\n      const updatedFrom = updatedTokens.find(t => t.symbol === selectedTokens.from?.symbol);\n      const updatedTo = updatedTokens.find(t => t.symbol === selectedTokens.to?.symbol);\n      if (updatedFrom && updatedTo) {\n        setSelectedTokens({ from: updatedFrom, to: updatedTo });\n      }\n\n      // Reset form\n      setInputAmount('');\n      setOutputAmount('');\n      setQuote(null);\n    } catch (error: any) {\n      console.error('Error executing swap:', error);\n\n      // Handle backend error responses\n      if (error.response?.data?.message) {\n        const errorMsg = error.response.data.message;\n\n        // Special handling for price impact errors\n        if (errorMsg.includes('price impact') || errorMsg.includes('slippage')) {\n          toast.error(`Price impact too high (${slippage}% slippage). Try increasing slippage tolerance in settings ⚙️`);\n        } else {\n          toast.error(`Swap failed: ${errorMsg}`);\n        }\n      } else if (error.response?.status === 429) {\n        toast.error('Rate limit exceeded. Please wait and try again.');\n      } else if (error.response?.status === 401) {\n        toast.error('Authentication required. Please connect your wallet.');\n      } else if (error.response?.status === 400) {\n        toast.error('Invalid swap parameters. Try reducing amount or increasing slippage ⚙️');\n      } else {\n        toast.error('An error occurred during swap');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTokenSwap = () => {\n    swapSelectedTokens();\n    setInputAmount('');\n    setOutputAmount('');\n    setQuote(null);\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto\">\n      <div className=\"card-glow bg-white dark:bg-dark-900 relative overflow-hidden\">\n        {/* Background Pattern */}\n        <div className=\"absolute inset-0 bg-mesh opacity-30\"></div>\n        \n        {/* Header */}\n        <div className=\"relative flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"heading-3\">Swap Tokens</h2>\n            <p className=\"body-small\">Trade tokens instantly with low fees</p>\n          </div>\n          <button\n            onClick={() => setShowSettings(!showSettings)}\n            className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-800 transition-colors\"\n            title=\"Transaction Settings\"\n          >\n            <svg\n              className=\"w-5 h-5 text-gray-600 dark:text-gray-400\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n              />\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Settings Panel */}\n        {showSettings && (\n          <div className=\"relative mb-4\">\n            <SlippageSettings onClose={() => setShowSettings(false)} />\n          </div>\n        )}\n\n        {/* From Token */}\n        <div className=\"relative mb-2\">\n          <div className=\"glass-subtle rounded-2xl p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"body-small\">From</span>\n              <span className=\"body-small\">\n                Balance: {selectedTokens.from?.balance?.toFixed(4) || '0.00'}\n              </span>\n            </div>\n\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => setShowFromSelector(true)}\n                className=\"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-dark-800 hover:bg-gray-200 dark:hover:bg-dark-700 transition-colors duration-200 min-w-fit whitespace-nowrap\"\n              >\n                {selectedTokens.from ? (\n                  <>\n                    <div className=\"w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/20 flex items-center justify-center font-bold text-primary-600 dark:text-primary-400 text-xs\">\n                      {selectedTokens.from.symbol.charAt(0)}\n                    </div>\n                    <span className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                      {selectedTokens.from.symbol}\n                    </span>\n                  </>\n                ) : (\n                  <span className=\"text-gray-500\">Select token</span>\n                )}\n              </button>\n\n              <input\n                type=\"text\"\n                value={inputAmount}\n                onChange={(e) => setInputAmount(e.target.value)}\n                placeholder=\"0.0\"\n                className=\"flex-1 max-w-[220px] text-right text-2xl font-semibold bg-transparent border-none outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Swap Button */}\n        <div className=\"flex justify-center -my-1 relative z-10\">\n          <button\n            onClick={handleTokenSwap}\n            className=\"p-2 rounded-xl bg-white dark:bg-dark-900 border-4 border-gray-50 dark:border-dark-950 shadow-lg hover:shadow-glow transition-all duration-200 hover:rotate-180 transform hover:scale-110\"\n          >\n            <svg\n              className=\"w-5 h-5 text-gray-600 dark:text-gray-400\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* To Token */}\n        <div className=\"relative mb-6\">\n          <div className=\"glass-subtle rounded-2xl p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <span className=\"body-small\">To</span>\n              <span className=\"body-small\">\n                Balance: {selectedTokens.to?.balance?.toFixed(4) || '0.00'}\n              </span>\n            </div>\n\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => setShowToSelector(true)}\n                className=\"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-dark-800 hover:bg-gray-200 dark:hover:bg-dark-700 transition-colors duration-200 min-w-fit whitespace-nowrap\"\n              >\n                {selectedTokens.to ? (\n                  <>\n                    <div className=\"w-6 h-6 rounded-full bg-success-100 dark:bg-success-900/20 flex items-center justify-center font-bold text-success-600 dark:text-success-400 text-xs\">\n                      {selectedTokens.to.symbol.charAt(0)}\n                    </div>\n                    <span className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                      {selectedTokens.to.symbol}\n                    </span>\n                  </>\n                ) : (\n                  <span className=\"text-gray-500\">Select token</span>\n                )}\n              </button>\n\n              <div className=\"flex-1 max-w-[220px] text-right text-2xl font-semibold text-gray-900 dark:text-gray-100\">\n                {calculating ? '...' : outputAmount || '0.0'}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Quote Details */}\n        {quote && (\n          <div className=\"mb-6 glass-subtle rounded-xl p-4 space-y-2\">\n            <div className=\"flex justify-between body-small\">\n              <span className=\"text-gray-600 dark:text-gray-400\">Rate:</span>\n              <span className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                1 {selectedTokens.from?.symbol} = {(quote.outputAmount / quote.inputAmount).toFixed(4)} {selectedTokens.to?.symbol}\n              </span>\n            </div>\n            <div className=\"flex justify-between body-small\">\n              <span className=\"text-gray-600 dark:text-gray-400\">Price Impact:</span>\n              <span className={`font-semibold ${quote.priceImpact > 5 ? 'text-error-600' : 'text-success-600'}`}>\n                {quote.priceImpact.toFixed(2)}%\n              </span>\n            </div>\n            <div className=\"flex justify-between body-small\">\n              <span className=\"text-gray-600 dark:text-gray-400\">Fee:</span>\n              <span className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                {quote.fee.toFixed(6)} {selectedTokens.from?.symbol}\n              </span>\n            </div>\n            <div className=\"flex justify-between body-small\">\n              <span className=\"text-gray-600 dark:text-gray-400\">Slippage Tolerance:</span>\n              <span className=\"font-semibold text-gray-900 dark:text-gray-100\">\n                {slippage}%\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Swap Button */}\n        <button\n          onClick={handleSwap}\n          disabled={loading || !isConnected || !selectedTokens.from || !selectedTokens.to || !inputAmount || !quote}\n          className={`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center space-x-2 ${\n            loading || !isConnected || !selectedTokens.from || !selectedTokens.to || !inputAmount || !quote\n              ? 'bg-gray-200 dark:bg-dark-800 text-gray-400 dark:text-gray-600 cursor-not-allowed'\n              : 'btn-primary'\n          }`}\n        >\n          {loading ? (\n            <>\n              <div className=\"spinner w-5 h-5\"></div>\n              <span>Swapping...</span>\n            </>\n          ) : !isConnected ? (\n            'Connect Wallet'\n          ) : (\n            'Swap Tokens'\n          )}\n        </button>\n\n        {/* Quick Stats */}\n        <div className=\"mt-6 grid grid-cols-3 gap-4\">\n          <div className=\"text-center\">\n            <div className=\"text-success-500 mb-1\">\n              <span className=\"body-small font-medium\">24h Volume</span>\n            </div>\n            <span className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">$2.4M</span>\n          </div>\n\n          <div className=\"text-center\">\n            <div className=\"text-primary-500 mb-1\">\n              <span className=\"body-small font-medium\">Avg Time</span>\n            </div>\n            <span className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">~2s</span>\n          </div>\n\n          <div className=\"text-center\">\n            <div className=\"text-warning-500 mb-1\">\n              <span className=\"body-small font-medium\">Fee</span>\n            </div>\n            <span className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">0.3%</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Token Selectors */}\n      <TokenSelector\n        isOpen={showFromSelector}\n        onClose={() => setShowFromSelector(false)}\n        onSelect={(token) => {\n          setSelectedTokens({ from: token });\n          setShowFromSelector(false);\n        }}\n        tokens={tokens}\n        selectedToken={selectedTokens.from}\n        type=\"from\"\n      />\n\n      <TokenSelector\n        isOpen={showToSelector}\n        onClose={() => setShowToSelector(false)}\n        onSelect={(token) => {\n          setSelectedTokens({ to: token });\n          setShowToSelector(false);\n        }}\n        tokens={tokens}\n        selectedToken={selectedTokens.to}\n        type=\"to\"\n      />\n    </div>\n  );\n};\n\nexport default SwapInterface;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,WAAW;AACvC,SAASC,gBAAgB,QAAQ,4BAA4B;AAC7D,SAASC,UAAU,QAAQ,wBAAwB;AAEnD,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpC,MAAMC,aAAuB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,qBAAA,EAAAC,qBAAA,EAAAC,mBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,mBAAA,EAAAC,qBAAA;EACpC,MAAM;IAAEC,cAAc;IAAEC,iBAAiB;IAAEC,UAAU,EAAEC,kBAAkB;IAAEC,WAAW;IAAEC;EAAS,CAAC,GAAGxB,WAAW,CAAC,CAAC;EAClH,MAAM,CAACyB,WAAW,EAAEC,cAAc,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAAC6B,YAAY,EAAEC,eAAe,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC+B,MAAM,EAAEC,SAAS,CAAC,GAAGhC,QAAQ,CAAc,EAAE,CAAC;EACrD,MAAM,CAACiC,KAAK,EAAEC,QAAQ,CAAC,GAAGlC,QAAQ,CAAmB,IAAI,CAAC;EAC1D,MAAM,CAACmC,OAAO,EAAEC,UAAU,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACqC,WAAW,EAAEC,cAAc,CAAC,GAAGtC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACuC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACyC,cAAc,EAAEC,iBAAiB,CAAC,GAAG1C,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC2C,YAAY,EAAEC,eAAe,CAAC,GAAG5C,QAAQ,CAAC,KAAK,CAAC;;EAEvD;EACAC,SAAS,CAAC,MAAM;IACd,MAAM4C,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF;QACA,MAAMC,KAAK,GAAG,MAAM1C,UAAU,CAAC2C,QAAQ,CAAC,CAAC;;QAEzC;QACA,MAAMC,eAAe,GAAG,IAAIC,GAAG,CAAoB,CAAC;QACpDH,KAAK,CAACI,OAAO,CAACC,IAAI,IAAI;UACpB,IAAI,CAACH,eAAe,CAACI,GAAG,CAACD,IAAI,CAACE,MAAM,CAACC,MAAM,CAAC,EAAE;YAC5CN,eAAe,CAACO,GAAG,CAACJ,IAAI,CAACE,MAAM,CAACC,MAAM,EAAE;cAAE,GAAGH,IAAI,CAACE,MAAM;cAAEG,OAAO,EAAE;YAAE,CAAC,CAAC;UACzE;UACA,IAAI,CAACR,eAAe,CAACI,GAAG,CAACD,IAAI,CAACM,MAAM,CAACH,MAAM,CAAC,EAAE;YAC5CN,eAAe,CAACO,GAAG,CAACJ,IAAI,CAACM,MAAM,CAACH,MAAM,EAAE;cAAE,GAAGH,IAAI,CAACM,MAAM;cAAED,OAAO,EAAE;YAAE,CAAC,CAAC;UACzE;QACF,CAAC,CAAC;;QAEF;QACA;QACA;QACA,MAAME,UAAU,GAAG,MAAMtD,UAAU,CAACuD,SAAS,CAAC,cAAc,CAAC;;QAE7D;QACA,MAAMC,kBAAkB,GAAGC,KAAK,CAACC,IAAI,CAACd,eAAe,CAACe,MAAM,CAAC,CAAC,CAAC,CAACC,GAAG,CAACC,KAAK,IAAI;UAC3E,MAAMC,SAAS,GAAGR,UAAU,CAACS,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACd,MAAM,KAAKW,KAAK,CAACX,MAAM,CAAC;UACjE,OAAO;YACL,GAAGW,KAAK;YACRT,OAAO,EAAE,CAAAU,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEV,OAAO,KAAI,CAAC,CAAE;UACpC,CAAC;QACH,CAAC,CAAC;QAEFxB,SAAS,CAAC4B,kBAAkB,CAAC;QAC7BzD,gBAAgB,CAACkE,QAAQ,CAAC,CAAC,CAACrC,SAAS,CAAC4B,kBAAkB,CAAC;QAEzDU,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEX,kBAAkB,CAAC;MAChE,CAAC,CAAC,OAAOY,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CjE,KAAK,CAACiE,KAAK,CAAC,oCAAoC,CAAC;MACnD;IACF,CAAC;IAED3B,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA5C,SAAS,CAAC,MAAM;IACd,IAAI,CAACoB,cAAc,CAACyC,IAAI,IAAI,CAACzC,cAAc,CAACoD,EAAE,IAAI,CAAC9C,WAAW,EAAE;MAC9DG,eAAe,CAAC,EAAE,CAAC;MACnBI,QAAQ,CAAC,IAAI,CAAC;MACd;IACF;IAEA,MAAMwC,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjCpC,cAAc,CAAC,IAAI,CAAC;MACpB,IAAI;QACF,MAAMqC,MAAM,GAAGC,UAAU,CAACjD,WAAW,CAAC;QACtC,IAAIkD,KAAK,CAACF,MAAM,CAAC,IAAIA,MAAM,IAAI,CAAC,EAAE;UAChC7C,eAAe,CAAC,EAAE,CAAC;UACnBI,QAAQ,CAAC,IAAI,CAAC;UACd;QACF;;QAEA;QACA,MAAM4C,eAAe,GAAG,MAAM1E,UAAU,CAAC2E,kBAAkB,CAAC;UAC1DC,MAAM,EAAE,EAAE;UAAE;UACZC,WAAW,EAAE5D,cAAc,CAACyC,IAAI,CAAER,MAAM;UACxC4B,YAAY,EAAE7D,cAAc,CAACoD,EAAE,CAAEnB,MAAM;UACvC3B,WAAW,EAAEgD,MAAM,CAACQ,QAAQ,CAAC;QAC/B,CAAC,CAAC;QAEF,IAAIL,eAAe,EAAE;UACnB5C,QAAQ,CAAC4C,eAAe,CAAC;UACzBhD,eAAe,CAACgD,eAAe,CAACjD,YAAY,CAACuD,OAAO,CAAC,CAAC,CAAC,CAAC;QAC1D,CAAC,MAAM;UACLtD,eAAe,CAAC,EAAE,CAAC;UACnBI,QAAQ,CAAC,IAAI,CAAC;UACd3B,KAAK,CAACiE,KAAK,CAAC,6BAA6B,CAAC;QAC5C;MACF,CAAC,CAAC,OAAOA,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChD1C,eAAe,CAAC,EAAE,CAAC;QACnBI,QAAQ,CAAC,IAAI,CAAC;MAChB,CAAC,SAAS;QACRI,cAAc,CAAC,KAAK,CAAC;MACvB;IACF,CAAC;IAED,MAAM+C,OAAO,GAAGC,UAAU,CAACZ,cAAc,EAAE,GAAG,CAAC;IAC/C,OAAO,MAAMa,YAAY,CAACF,OAAO,CAAC;EACpC,CAAC,EAAE,CAAC1D,WAAW,EAAEN,cAAc,CAACyC,IAAI,EAAEzC,cAAc,CAACoD,EAAE,CAAC,CAAC;EAEzD,MAAMe,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI,CAACnE,cAAc,CAACyC,IAAI,IAAI,CAACzC,cAAc,CAACoD,EAAE,IAAI,CAAC9C,WAAW,IAAI,CAACM,KAAK,EAAE;MACxE1B,KAAK,CAACiE,KAAK,CAAC,2BAA2B,CAAC;MACxC;IACF;IAEA,MAAMG,MAAM,GAAGC,UAAU,CAACjD,WAAW,CAAC;IACtC,IAAIkD,KAAK,CAACF,MAAM,CAAC,IAAIA,MAAM,IAAI,CAAC,EAAE;MAChCpE,KAAK,CAACiE,KAAK,CAAC,6BAA6B,CAAC;MAC1C;IACF;IAEA,IAAI;MACFpC,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMqD,SAAS,GAAGxD,KAAK,CAACJ,YAAY,IAAI,CAAC,GAAGH,QAAQ,GAAG,GAAG,CAAC;;MAE3D;MACA,MAAMgE,QAAQ,GAAG,MAAMtF,UAAU,CAACuF,iBAAiB,CAAC;QAClDV,WAAW,EAAE5D,cAAc,CAACyC,IAAI,CAACR,MAAM;QACvC4B,YAAY,EAAE7D,cAAc,CAACoD,EAAE,CAACnB,MAAM;QACtC3B,WAAW,EAAEgD,MAAM,CAACS,OAAO,CAAC,EAAE,CAAC;QAAG;QAClCK,SAAS,EAAEA,SAAS,CAACL,OAAO,CAAC,EAAE,CAAC;QAChCQ,iBAAiB,EAAEC,IAAI,CAACC,KAAK,CAACpE,QAAQ,GAAG,GAAG,CAAC,CAAG;MAClD,CAAC,CAAC;MAEFnB,KAAK,CAACwF,OAAO,CAAC,6BAA6BnB,UAAU,CAACc,QAAQ,CAACM,SAAS,CAAC,CAACZ,OAAO,CAAC,CAAC,CAAC,IAAIM,QAAQ,CAACR,YAAY,EAAE,CAAC;;MAEhH;MACA,MAAM,IAAIe,OAAO,CAACC,OAAO,IAAIZ,UAAU,CAACY,OAAO,EAAE,IAAI,CAAC,CAAC;;MAEvD;MACA;MACA;MACA,MAAMC,aAAa,GAAG,MAAM/F,UAAU,CAACuD,SAAS,CAAC,OAAO,CAAC;MACzD3B,SAAS,CAACmE,aAAa,CAAC;MACxBhG,gBAAgB,CAACkE,QAAQ,CAAC,CAAC,CAACrC,SAAS,CAACmE,aAAa,CAAC;MAEpD7B,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE4B,aAAa,CAACC,MAAM,CAAChC,CAAC;QAAA,IAAAiC,oBAAA,EAAAC,kBAAA;QAAA,OAClElC,CAAC,CAACd,MAAM,OAAA+C,oBAAA,GAAKhF,cAAc,CAACyC,IAAI,cAAAuC,oBAAA,uBAAnBA,oBAAA,CAAqB/C,MAAM,KAAIc,CAAC,CAACd,MAAM,OAAAgD,kBAAA,GAAKjF,cAAc,CAACoD,EAAE,cAAA6B,kBAAA,uBAAjBA,kBAAA,CAAmBhD,MAAM;MAAA,CACpF,CAAC,CAAC;;MAEF;MACA,MAAMiD,WAAW,GAAGJ,aAAa,CAAChC,IAAI,CAACC,CAAC;QAAA,IAAAoC,qBAAA;QAAA,OAAIpC,CAAC,CAACd,MAAM,OAAAkD,qBAAA,GAAKnF,cAAc,CAACyC,IAAI,cAAA0C,qBAAA,uBAAnBA,qBAAA,CAAqBlD,MAAM;MAAA,EAAC;MACrF,MAAMmD,SAAS,GAAGN,aAAa,CAAChC,IAAI,CAACC,CAAC;QAAA,IAAAsC,mBAAA;QAAA,OAAItC,CAAC,CAACd,MAAM,OAAAoD,mBAAA,GAAKrF,cAAc,CAACoD,EAAE,cAAAiC,mBAAA,uBAAjBA,mBAAA,CAAmBpD,MAAM;MAAA,EAAC;MACjF,IAAIiD,WAAW,IAAIE,SAAS,EAAE;QAC5BnF,iBAAiB,CAAC;UAAEwC,IAAI,EAAEyC,WAAW;UAAE9B,EAAE,EAAEgC;QAAU,CAAC,CAAC;MACzD;;MAEA;MACA7E,cAAc,CAAC,EAAE,CAAC;MAClBE,eAAe,CAAC,EAAE,CAAC;MACnBI,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOsC,KAAU,EAAE;MAAA,IAAAmC,eAAA,EAAAC,oBAAA,EAAAC,gBAAA,EAAAC,gBAAA,EAAAC,gBAAA;MACnBzC,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;;MAE7C;MACA,KAAAmC,eAAA,GAAInC,KAAK,CAACkB,QAAQ,cAAAiB,eAAA,gBAAAC,oBAAA,GAAdD,eAAA,CAAgBK,IAAI,cAAAJ,oBAAA,eAApBA,oBAAA,CAAsBK,OAAO,EAAE;QACjC,MAAMC,QAAQ,GAAG1C,KAAK,CAACkB,QAAQ,CAACsB,IAAI,CAACC,OAAO;;QAE5C;QACA,IAAIC,QAAQ,CAACC,QAAQ,CAAC,cAAc,CAAC,IAAID,QAAQ,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;UACtE5G,KAAK,CAACiE,KAAK,CAAC,0BAA0B9C,QAAQ,+DAA+D,CAAC;QAChH,CAAC,MAAM;UACLnB,KAAK,CAACiE,KAAK,CAAC,gBAAgB0C,QAAQ,EAAE,CAAC;QACzC;MACF,CAAC,MAAM,IAAI,EAAAL,gBAAA,GAAArC,KAAK,CAACkB,QAAQ,cAAAmB,gBAAA,uBAAdA,gBAAA,CAAgBO,MAAM,MAAK,GAAG,EAAE;QACzC7G,KAAK,CAACiE,KAAK,CAAC,iDAAiD,CAAC;MAChE,CAAC,MAAM,IAAI,EAAAsC,gBAAA,GAAAtC,KAAK,CAACkB,QAAQ,cAAAoB,gBAAA,uBAAdA,gBAAA,CAAgBM,MAAM,MAAK,GAAG,EAAE;QACzC7G,KAAK,CAACiE,KAAK,CAAC,sDAAsD,CAAC;MACrE,CAAC,MAAM,IAAI,EAAAuC,gBAAA,GAAAvC,KAAK,CAACkB,QAAQ,cAAAqB,gBAAA,uBAAdA,gBAAA,CAAgBK,MAAM,MAAK,GAAG,EAAE;QACzC7G,KAAK,CAACiE,KAAK,CAAC,wEAAwE,CAAC;MACvF,CAAC,MAAM;QACLjE,KAAK,CAACiE,KAAK,CAAC,+BAA+B,CAAC;MAC9C;IACF,CAAC,SAAS;MACRpC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMiF,eAAe,GAAGA,CAAA,KAAM;IAC5B7F,kBAAkB,CAAC,CAAC;IACpBI,cAAc,CAAC,EAAE,CAAC;IAClBE,eAAe,CAAC,EAAE,CAAC;IACnBI,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC;EAED,oBACEzB,OAAA;IAAK6G,SAAS,EAAC,kBAAkB;IAAAC,QAAA,gBAC/B9G,OAAA;MAAK6G,SAAS,EAAC,8DAA8D;MAAAC,QAAA,gBAE3E9G,OAAA;QAAK6G,SAAS,EAAC;MAAqC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAG3DlH,OAAA;QAAK6G,SAAS,EAAC,iDAAiD;QAAAC,QAAA,gBAC9D9G,OAAA;UAAA8G,QAAA,gBACE9G,OAAA;YAAI6G,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC1ClH,OAAA;YAAG6G,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAoC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/D,CAAC,eACNlH,OAAA;UACEmH,OAAO,EAAEA,CAAA,KAAMhF,eAAe,CAAC,CAACD,YAAY,CAAE;UAC9C2E,SAAS,EAAC,2EAA2E;UACrFO,KAAK,EAAC,sBAAsB;UAAAN,QAAA,eAE5B9G,OAAA;YACE6G,SAAS,EAAC,0CAA0C;YACpDQ,IAAI,EAAC,MAAM;YACXC,MAAM,EAAC,cAAc;YACrBC,OAAO,EAAC,WAAW;YAAAT,QAAA,gBAEnB9G,OAAA;cACEwH,aAAa,EAAC,OAAO;cACrBC,cAAc,EAAC,OAAO;cACtBC,WAAW,EAAE,CAAE;cACfC,CAAC,EAAC;YAAqe;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxe,CAAC,eACFlH,OAAA;cACEwH,aAAa,EAAC,OAAO;cACrBC,cAAc,EAAC,OAAO;cACtBC,WAAW,EAAE,CAAE;cACfC,CAAC,EAAC;YAAkC;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAGLhF,YAAY,iBACXlC,OAAA;QAAK6G,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5B9G,OAAA,CAACH,gBAAgB;UAAC+H,OAAO,EAAEA,CAAA,KAAMzF,eAAe,CAAC,KAAK;QAAE;UAAA4E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxD,CACN,eAGDlH,OAAA;QAAK6G,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5B9G,OAAA;UAAK6G,SAAS,EAAC,8BAA8B;UAAAC,QAAA,gBAC3C9G,OAAA;YAAK6G,SAAS,EAAC,wCAAwC;YAAAC,QAAA,gBACrD9G,OAAA;cAAM6G,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAAI;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACxClH,OAAA;cAAM6G,SAAS,EAAC,YAAY;cAAAC,QAAA,GAAC,WAClB,EAAC,EAAAzG,qBAAA,GAAAO,cAAc,CAACyC,IAAI,cAAAhD,qBAAA,wBAAAC,qBAAA,GAAnBD,qBAAA,CAAqB0C,OAAO,cAAAzC,qBAAA,uBAA5BA,qBAAA,CAA8BqE,OAAO,CAAC,CAAC,CAAC,KAAI,MAAM;YAAA;cAAAoC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAENlH,OAAA;YAAK6G,SAAS,EAAC,6BAA6B;YAAAC,QAAA,gBAC1C9G,OAAA;cACEmH,OAAO,EAAEA,CAAA,KAAMpF,mBAAmB,CAAC,IAAI,CAAE;cACzC8E,SAAS,EAAC,mLAAmL;cAAAC,QAAA,EAE5LlG,cAAc,CAACyC,IAAI,gBAClBrD,OAAA,CAAAE,SAAA;gBAAA4G,QAAA,gBACE9G,OAAA;kBAAK6G,SAAS,EAAC,sJAAsJ;kBAAAC,QAAA,EAClKlG,cAAc,CAACyC,IAAI,CAACR,MAAM,CAACgF,MAAM,CAAC,CAAC;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClC,CAAC,eACNlH,OAAA;kBAAM6G,SAAS,EAAC,gDAAgD;kBAAAC,QAAA,EAC7DlG,cAAc,CAACyC,IAAI,CAACR;gBAAM;kBAAAkE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA,eACP,CAAC,gBAEHlH,OAAA;gBAAM6G,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAY;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YACnD;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC,eAETlH,OAAA;cACE8H,IAAI,EAAC,MAAM;cACXC,KAAK,EAAE7G,WAAY;cACnB8G,QAAQ,EAAGC,CAAC,IAAK9G,cAAc,CAAC8G,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;cAChDI,WAAW,EAAC,KAAK;cACjBtB,SAAS,EAAC;YAAsJ;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNlH,OAAA;QAAK6G,SAAS,EAAC,yCAAyC;QAAAC,QAAA,eACtD9G,OAAA;UACEmH,OAAO,EAAEP,eAAgB;UACzBC,SAAS,EAAC,0LAA0L;UAAAC,QAAA,eAEpM9G,OAAA;YACE6G,SAAS,EAAC,0CAA0C;YACpDQ,IAAI,EAAC,MAAM;YACXC,MAAM,EAAC,cAAc;YACrBC,OAAO,EAAC,WAAW;YAAAT,QAAA,eAEnB9G,OAAA;cACEwH,aAAa,EAAC,OAAO;cACrBC,cAAc,EAAC,OAAO;cACtBC,WAAW,EAAE,CAAE;cACfC,CAAC,EAAC;YAAkD;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrD;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGNlH,OAAA;QAAK6G,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5B9G,OAAA;UAAK6G,SAAS,EAAC,8BAA8B;UAAAC,QAAA,gBAC3C9G,OAAA;YAAK6G,SAAS,EAAC,wCAAwC;YAAAC,QAAA,gBACrD9G,OAAA;cAAM6G,SAAS,EAAC,YAAY;cAAAC,QAAA,EAAC;YAAE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACtClH,OAAA;cAAM6G,SAAS,EAAC,YAAY;cAAAC,QAAA,GAAC,WAClB,EAAC,EAAAvG,mBAAA,GAAAK,cAAc,CAACoD,EAAE,cAAAzD,mBAAA,wBAAAC,qBAAA,GAAjBD,mBAAA,CAAmBwC,OAAO,cAAAvC,qBAAA,uBAA1BA,qBAAA,CAA4BmE,OAAO,CAAC,CAAC,CAAC,KAAI,MAAM;YAAA;cAAAoC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAENlH,OAAA;YAAK6G,SAAS,EAAC,6BAA6B;YAAAC,QAAA,gBAC1C9G,OAAA;cACEmH,OAAO,EAAEA,CAAA,KAAMlF,iBAAiB,CAAC,IAAI,CAAE;cACvC4E,SAAS,EAAC,mLAAmL;cAAAC,QAAA,EAE5LlG,cAAc,CAACoD,EAAE,gBAChBhE,OAAA,CAAAE,SAAA;gBAAA4G,QAAA,gBACE9G,OAAA;kBAAK6G,SAAS,EAAC,sJAAsJ;kBAAAC,QAAA,EAClKlG,cAAc,CAACoD,EAAE,CAACnB,MAAM,CAACgF,MAAM,CAAC,CAAC;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChC,CAAC,eACNlH,OAAA;kBAAM6G,SAAS,EAAC,gDAAgD;kBAAAC,QAAA,EAC7DlG,cAAc,CAACoD,EAAE,CAACnB;gBAAM;kBAAAkE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrB,CAAC;cAAA,eACP,CAAC,gBAEHlH,OAAA;gBAAM6G,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAY;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YACnD;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC,eAETlH,OAAA;cAAK6G,SAAS,EAAC,yFAAyF;cAAAC,QAAA,EACrGlF,WAAW,GAAG,KAAK,GAAGR,YAAY,IAAI;YAAK;cAAA2F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGL1F,KAAK,iBACJxB,OAAA;QAAK6G,SAAS,EAAC,4CAA4C;QAAAC,QAAA,gBACzD9G,OAAA;UAAK6G,SAAS,EAAC,iCAAiC;UAAAC,QAAA,gBAC9C9G,OAAA;YAAM6G,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC/DlH,OAAA;YAAM6G,SAAS,EAAC,gDAAgD;YAAAC,QAAA,GAAC,IAC7D,GAAArG,qBAAA,GAACG,cAAc,CAACyC,IAAI,cAAA5C,qBAAA,uBAAnBA,qBAAA,CAAqBoC,MAAM,EAAC,KAAG,EAAC,CAACrB,KAAK,CAACJ,YAAY,GAAGI,KAAK,CAACN,WAAW,EAAEyD,OAAO,CAAC,CAAC,CAAC,EAAC,GAAC,GAAAjE,mBAAA,GAACE,cAAc,CAACoD,EAAE,cAAAtD,mBAAA,uBAAjBA,mBAAA,CAAmBmC,MAAM;UAAA;YAAAkE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9G,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNlH,OAAA;UAAK6G,SAAS,EAAC,iCAAiC;UAAAC,QAAA,gBAC9C9G,OAAA;YAAM6G,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACvElH,OAAA;YAAM6G,SAAS,EAAE,iBAAiBrF,KAAK,CAAC4G,WAAW,GAAG,CAAC,GAAG,gBAAgB,GAAG,kBAAkB,EAAG;YAAAtB,QAAA,GAC/FtF,KAAK,CAAC4G,WAAW,CAACzD,OAAO,CAAC,CAAC,CAAC,EAAC,GAChC;UAAA;YAAAoC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNlH,OAAA;UAAK6G,SAAS,EAAC,iCAAiC;UAAAC,QAAA,gBAC9C9G,OAAA;YAAM6G,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAC;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC9DlH,OAAA;YAAM6G,SAAS,EAAC,gDAAgD;YAAAC,QAAA,GAC7DtF,KAAK,CAAC6G,GAAG,CAAC1D,OAAO,CAAC,CAAC,CAAC,EAAC,GAAC,GAAAhE,qBAAA,GAACC,cAAc,CAACyC,IAAI,cAAA1C,qBAAA,uBAAnBA,qBAAA,CAAqBkC,MAAM;UAAA;YAAAkE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNlH,OAAA;UAAK6G,SAAS,EAAC,iCAAiC;UAAAC,QAAA,gBAC9C9G,OAAA;YAAM6G,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAC;UAAmB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC7ElH,OAAA;YAAM6G,SAAS,EAAC,gDAAgD;YAAAC,QAAA,GAC7D7F,QAAQ,EAAC,GACZ;UAAA;YAAA8F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,eAGDlH,OAAA;QACEmH,OAAO,EAAEpC,UAAW;QACpBuD,QAAQ,EAAE5G,OAAO,IAAI,CAACV,WAAW,IAAI,CAACJ,cAAc,CAACyC,IAAI,IAAI,CAACzC,cAAc,CAACoD,EAAE,IAAI,CAAC9C,WAAW,IAAI,CAACM,KAAM;QAC1GqF,SAAS,EAAE,uHACTnF,OAAO,IAAI,CAACV,WAAW,IAAI,CAACJ,cAAc,CAACyC,IAAI,IAAI,CAACzC,cAAc,CAACoD,EAAE,IAAI,CAAC9C,WAAW,IAAI,CAACM,KAAK,GAC3F,kFAAkF,GAClF,aAAa,EAChB;QAAAsF,QAAA,EAEFpF,OAAO,gBACN1B,OAAA,CAAAE,SAAA;UAAA4G,QAAA,gBACE9G,OAAA;YAAK6G,SAAS,EAAC;UAAiB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACvClH,OAAA;YAAA8G,QAAA,EAAM;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,eACxB,CAAC,GACD,CAAClG,WAAW,GACd,gBAAgB,GAEhB;MACD;QAAA+F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC,eAGTlH,OAAA;QAAK6G,SAAS,EAAC,6BAA6B;QAAAC,QAAA,gBAC1C9G,OAAA;UAAK6G,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1B9G,OAAA;YAAK6G,SAAS,EAAC,uBAAuB;YAAAC,QAAA,eACpC9G,OAAA;cAAM6G,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvD,CAAC,eACNlH,OAAA;YAAM6G,SAAS,EAAC,wDAAwD;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClF,CAAC,eAENlH,OAAA;UAAK6G,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1B9G,OAAA;YAAK6G,SAAS,EAAC,uBAAuB;YAAAC,QAAA,eACpC9G,OAAA;cAAM6G,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAC;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrD,CAAC,eACNlH,OAAA;YAAM6G,SAAS,EAAC,wDAAwD;YAAAC,QAAA,EAAC;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChF,CAAC,eAENlH,OAAA;UAAK6G,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1B9G,OAAA;YAAK6G,SAAS,EAAC,uBAAuB;YAAAC,QAAA,eACpC9G,OAAA;cAAM6G,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAC;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChD,CAAC,eACNlH,OAAA;YAAM6G,SAAS,EAAC,wDAAwD;YAAAC,QAAA,EAAC;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNlH,OAAA,CAACJ,aAAa;MACZ2I,MAAM,EAAEzG,gBAAiB;MACzB8F,OAAO,EAAEA,CAAA,KAAM7F,mBAAmB,CAAC,KAAK,CAAE;MAC1CyG,QAAQ,EAAGhF,KAAK,IAAK;QACnB3C,iBAAiB,CAAC;UAAEwC,IAAI,EAAEG;QAAM,CAAC,CAAC;QAClCzB,mBAAmB,CAAC,KAAK,CAAC;MAC5B,CAAE;MACFT,MAAM,EAAEA,MAAO;MACfmH,aAAa,EAAE7H,cAAc,CAACyC,IAAK;MACnCyE,IAAI,EAAC;IAAM;MAAAf,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACZ,CAAC,eAEFlH,OAAA,CAACJ,aAAa;MACZ2I,MAAM,EAAEvG,cAAe;MACvB4F,OAAO,EAAEA,CAAA,KAAM3F,iBAAiB,CAAC,KAAK,CAAE;MACxCuG,QAAQ,EAAGhF,KAAK,IAAK;QACnB3C,iBAAiB,CAAC;UAAEmD,EAAE,EAAER;QAAM,CAAC,CAAC;QAChCvB,iBAAiB,CAAC,KAAK,CAAC;MAC1B,CAAE;MACFX,MAAM,EAAEA,MAAO;MACfmH,aAAa,EAAE7H,cAAc,CAACoD,EAAG;MACjC8D,IAAI,EAAC;IAAI;MAAAf,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAAC9G,EAAA,CArbID,aAAuB;EAAA,QAC0EV,WAAW;AAAA;AAAAiJ,EAAA,GAD5GvI,aAAuB;AAub7B,eAAeA,aAAa;AAAC,IAAAuI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}