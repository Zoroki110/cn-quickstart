{"ast":null,"code":"import _objectSpread from\"/root/cn-quickstart/quickstart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo,useCallback,useRef}from'react';import{useQueryClient}from'@tanstack/react-query';import{useAppStore}from'../stores';import{useContractStore}from'../stores/useContractStore';import{backendApi}from'../services/backendApi';import TokenSelector from'./TokenSelector';import SlippageSettings from'./SlippageSettings';import toast from'react-hot-toast';import{useWalletAuth}from'../wallet';import{useLegacyBalances}from'../hooks';import{calculateSwapQuoteFromPool}from'../utils/poolMath';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SwapInterface=()=>{var _selectedTokens$from4,_selectedTokens$to4,_selectedTokens$from5,_selectedTokens$to5,_selectedTokens$from6;const queryClient=useQueryClient();const{selectedTokens,setSelectedTokens,swapTokens:swapSelectedTokens,slippage}=useAppStore();const{partyId}=useWalletAuth();const{balances:legacyBalances,reload:reloadLegacyBalances}=useLegacyBalances(partyId||null);const[inputAmount,setInputAmount]=useState('');const[outputAmount,setOutputAmount]=useState('');const[tokens,setTokens]=useState([]);const[quote,setQuote]=useState(null);const[loading,setLoading]=useState(false);const[calculating,setCalculating]=useState(false);const[showFromSelector,setShowFromSelector]=useState(false);const[showToSelector,setShowToSelector]=useState(false);const[showSettings,setShowSettings]=useState(false);const[pools,setPools]=useState([]);const[volume24h,setVolume24h]=useState(0);const lastConnectedParty=useRef(null);const resolvedPoolId=useMemo(()=>{var _match$contractId;if(!selectedTokens.from||!selectedTokens.to||pools.length===0)return null;const fromSymbol=selectedTokens.from.symbol.toUpperCase();const toSymbol=selectedTokens.to.symbol.toUpperCase();const match=pools.find(pool=>{const symbolA=pool.tokenA.symbol.toUpperCase();const symbolB=pool.tokenB.symbol.toUpperCase();return symbolA===fromSymbol&&symbolB===toSymbol||symbolA===toSymbol&&symbolB===fromSymbol;});return(_match$contractId=match===null||match===void 0?void 0:match.contractId)!==null&&_match$contractId!==void 0?_match$contractId:null;},[pools,selectedTokens.from,selectedTokens.to]);const activePool=useMemo(()=>{var _pools$find;if(!resolvedPoolId){return null;}return(_pools$find=pools.find(pool=>pool.contractId===resolvedPoolId||pool.poolId===resolvedPoolId))!==null&&_pools$find!==void 0?_pools$find:null;},[pools,resolvedPoolId]);const formatCurrency=value=>{if(!isFinite(value)||value<=0)return'$0';if(value>=1000000)return\"$\".concat((value/1000000).toFixed(1),\"M\");if(value>=1000)return\"$\".concat((value/1000).toFixed(1),\"K\");return\"$\".concat(value.toFixed(0));};const getBalanceEntry=useCallback(symbol=>{if(!symbol){return undefined;}return legacyBalances[symbol.toUpperCase()];},[legacyBalances]);const formatBalanceDisplay=useCallback(symbol=>{const entry=getBalanceEntry(symbol);if(!entry){return'0.0000';}const numeric=Number(entry.amount);if(!Number.isFinite(numeric)){return entry.amount;}return numeric.toLocaleString('en-US',{maximumFractionDigits:4});},[getBalanceEntry]);const getNumericBalance=useCallback(symbol=>{const entry=getBalanceEntry(symbol);if(!entry){return 0;}const numeric=Number(entry.amount);return Number.isFinite(numeric)?numeric:0;},[getBalanceEntry]);const parsedInputAmount=parseFloat(inputAmount||'0');const normalizedInputAmount=Number.isFinite(parsedInputAmount)?parsedInputAmount:0;const insufficientBalance=Boolean(partyId&&selectedTokens.from&&normalizedInputAmount>getNumericBalance(selectedTokens.from.symbol));const disableSwap=loading||!partyId||!selectedTokens.from||!selectedTokens.to||!inputAmount||!quote||insufficientBalance;useEffect(()=>{const previous=lastConnectedParty.current;if(partyId&&partyId!==previous){reloadLegacyBalances();}if(!partyId){lastConnectedParty.current=null;return;}lastConnectedParty.current=partyId;},[partyId,reloadLegacyBalances]);useEffect(()=>{if(typeof window==='undefined'){return;}const handleWalletConnected=()=>{reloadLegacyBalances();};window.addEventListener('clearportx:wallet:connected',handleWalletConnected);return()=>{window.removeEventListener('clearportx:wallet:connected',handleWalletConnected);};},[reloadLegacyBalances]);// Charger les tokens depuis les pools actifs + balances utilisateur\nuseEffect(()=>{const loadTokens=async()=>{try{const pools=await backendApi.getPools();setPools(pools);const uniqueTokensMap=new Map();pools.forEach(pool=>{if(!uniqueTokensMap.has(pool.tokenA.symbol)){uniqueTokensMap.set(pool.tokenA.symbol,_objectSpread(_objectSpread({},pool.tokenA),{},{balance:0}));}if(!uniqueTokensMap.has(pool.tokenB.symbol)){uniqueTokensMap.set(pool.tokenB.symbol,_objectSpread(_objectSpread({},pool.tokenB),{},{balance:0}));}});let tokensWithBalances=Array.from(uniqueTokensMap.values()).map(token=>_objectSpread(_objectSpread({},token),{},{balance:0}));if(partyId){try{const userTokens=await backendApi.getWalletTokens(partyId);tokensWithBalances=tokensWithBalances.map(token=>{const userToken=userTokens.find(t=>t.symbol===token.symbol);return _objectSpread(_objectSpread({},token),{},{balance:(userToken===null||userToken===void 0?void 0:userToken.balance)||0});});}catch(balanceError){console.warn('Failed to load wallet tokens for party',balanceError);}}setTokens(tokensWithBalances);useContractStore.getState().setTokens(tokensWithBalances);}catch(error){console.error('Error loading tokens:',error);toast.error('Failed to load tokens from backend');}};loadTokens();},[partyId]);// Compute 24h volume for selected pair from current pools\nuseEffect(()=>{if(!selectedTokens.from||!selectedTokens.to||pools.length===0){setVolume24h(0);return;}const a=selectedTokens.from.symbol.toUpperCase();const b=selectedTokens.to.symbol.toUpperCase();const match=pools.find(p=>{const pa=p.tokenA.symbol.toUpperCase();const pb=p.tokenB.symbol.toUpperCase();return pa===a&&pb===b||pa===b&&pb===a;});setVolume24h((match===null||match===void 0?void 0:match.volume24h)||0);},[selectedTokens.from,selectedTokens.to,pools]);// Calculer le quote quand le montant change\nuseEffect(()=>{if(!selectedTokens.from||!selectedTokens.to||!inputAmount||!activePool){setOutputAmount('');setQuote(null);return;}const timeout=setTimeout(()=>{setCalculating(true);try{const amount=parseFloat(inputAmount);if(!Number.isFinite(amount)||amount<=0){setOutputAmount('');setQuote(null);return;}const estimatedQuote=calculateSwapQuoteFromPool(activePool,selectedTokens.from.symbol,selectedTokens.to.symbol,amount);if(!estimatedQuote){setOutputAmount('');setQuote(null);return;}setQuote(estimatedQuote);setOutputAmount(estimatedQuote.outputAmount.toFixed(6));}finally{setCalculating(false);}},250);return()=>clearTimeout(timeout);},[inputAmount,selectedTokens.from,selectedTokens.to,activePool]);const handleSwap=async()=>{if(!selectedTokens.from||!selectedTokens.to||!inputAmount||!quote){toast.error('Please fill in all fields');return;}if(!partyId){toast.error('Connect a wallet to swap tokens');return;}const amount=parseFloat(inputAmount);if(isNaN(amount)||amount<=0){toast.error('Please enter a valid amount');return;}const availableBalance=getNumericBalance(selectedTokens.from.symbol);if(amount>availableBalance){toast.error('Insufficient balance for this swap');return;}if(!resolvedPoolId){toast.error('No liquidity pool available for this pair');return;}try{var _quote$outputAmount;setLoading(true);const minOutput=quote.outputAmount*(1-slippage/100);const response=await backendApi.executeAtomicSwap({poolId:resolvedPoolId,inputSymbol:selectedTokens.from.symbol,outputSymbol:selectedTokens.to.symbol,inputAmount:amount.toFixed(10),minOutput:minOutput.toFixed(10),maxPriceImpactBps:Math.round(slippage*100)});const rawAmountOut=Number(response.amountOut);const fallbackAmount=(_quote$outputAmount=quote===null||quote===void 0?void 0:quote.outputAmount)!==null&&_quote$outputAmount!==void 0?_quote$outputAmount:0;const displayAmount=Number.isFinite(rawAmountOut)&&rawAmountOut<1000?rawAmountOut:fallbackAmount;toast.success(\"Swap successful! Received \".concat(displayAmount.toFixed(4),\" \").concat(response.outputSymbol));if(partyId){let updatedTokens=await backendApi.getWalletTokens(partyId);for(let i=0;i<6;i++){var _next$find$balance,_next$find,_next$find$balance2,_next$find2,_updatedTokens$find$b,_updatedTokens$find,_updatedTokens$find$b2,_updatedTokens$find2;await new Promise(resolve=>setTimeout(resolve,600));const next=await backendApi.getWalletTokens(partyId);const fromBal=(_next$find$balance=(_next$find=next.find(t=>{var _selectedTokens$from;return t.symbol===((_selectedTokens$from=selectedTokens.from)===null||_selectedTokens$from===void 0?void 0:_selectedTokens$from.symbol);}))===null||_next$find===void 0?void 0:_next$find.balance)!==null&&_next$find$balance!==void 0?_next$find$balance:0;const toBal=(_next$find$balance2=(_next$find2=next.find(t=>{var _selectedTokens$to;return t.symbol===((_selectedTokens$to=selectedTokens.to)===null||_selectedTokens$to===void 0?void 0:_selectedTokens$to.symbol);}))===null||_next$find2===void 0?void 0:_next$find2.balance)!==null&&_next$find$balance2!==void 0?_next$find$balance2:0;const prevFromBal=(_updatedTokens$find$b=(_updatedTokens$find=updatedTokens.find(t=>{var _selectedTokens$from2;return t.symbol===((_selectedTokens$from2=selectedTokens.from)===null||_selectedTokens$from2===void 0?void 0:_selectedTokens$from2.symbol);}))===null||_updatedTokens$find===void 0?void 0:_updatedTokens$find.balance)!==null&&_updatedTokens$find$b!==void 0?_updatedTokens$find$b:0;const prevToBal=(_updatedTokens$find$b2=(_updatedTokens$find2=updatedTokens.find(t=>{var _selectedTokens$to2;return t.symbol===((_selectedTokens$to2=selectedTokens.to)===null||_selectedTokens$to2===void 0?void 0:_selectedTokens$to2.symbol);}))===null||_updatedTokens$find2===void 0?void 0:_updatedTokens$find2.balance)!==null&&_updatedTokens$find$b2!==void 0?_updatedTokens$find$b2:0;if(fromBal!==prevFromBal||toBal!==prevToBal){updatedTokens=next;break;}updatedTokens=next;}setTokens(updatedTokens);useContractStore.getState().setTokens(updatedTokens);const updatedFrom=updatedTokens.find(t=>{var _selectedTokens$from3;return t.symbol===((_selectedTokens$from3=selectedTokens.from)===null||_selectedTokens$from3===void 0?void 0:_selectedTokens$from3.symbol);});const updatedTo=updatedTokens.find(t=>{var _selectedTokens$to3;return t.symbol===((_selectedTokens$to3=selectedTokens.to)===null||_selectedTokens$to3===void 0?void 0:_selectedTokens$to3.symbol);});if(updatedFrom&&updatedTo){setSelectedTokens({from:updatedFrom,to:updatedTo});}}await reloadLegacyBalances();queryClient.invalidateQueries({queryKey:['tokens']});queryClient.invalidateQueries({queryKey:['pools']});setInputAmount('');setOutputAmount('');setQuote(null);}catch(error){var _error$httpStatus,_error$response,_error$code,_error$response2,_error$response2$data,_ref,_ref2,_error$message,_error$response3,_error$response3$data,_error$response4,_error$response4$data;console.error('Error executing swap:',error);const httpStatus=(_error$httpStatus=error===null||error===void 0?void 0:error.httpStatus)!==null&&_error$httpStatus!==void 0?_error$httpStatus:error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status;const code=(_error$code=error===null||error===void 0?void 0:error.code)!==null&&_error$code!==void 0?_error$code:error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error;const message=(_ref=(_ref2=(_error$message=error===null||error===void 0?void 0:error.message)!==null&&_error$message!==void 0?_error$message:error===null||error===void 0?void 0:(_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)!==null&&_ref2!==void 0?_ref2:error===null||error===void 0?void 0:(_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)!==null&&_ref!==void 0?_ref:'Unknown error';if(httpStatus===422||/slippage|price impact|Min output not met/i.test(message)||code==='SLIPPAGE_MIN_OUTPUT_NOT_MET'||code==='PRICE_IMPACT_TOO_HIGH'){toast.error(\"Slippage/price impact too high. Try increasing tolerance in settings \\u2699\\uFE0F\");}else if(httpStatus===429){toast.error('Rate limit exceeded. Please wait and try again.');}else if(httpStatus===401){toast.error('Authentication required. Please connect your wallet.');}else if(httpStatus===400){toast.error('Invalid swap parameters. Try reducing amount or increasing slippage ⚙️');}else if(httpStatus===409){toast.error('Temporary ledger visibility issue. Please try again.');}else{toast.error(\"Swap failed: \".concat(message));}}finally{setLoading(false);}};const handleTokenSwap=()=>{swapSelectedTokens();setInputAmount('');setOutputAmount('');setQuote(null);};const renderTokenBadge=function(token,fallbackColor){var _token$symbol$charAt,_token$symbol;let fallbackTextColor=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'text-gray-900 dark:text-gray-100';return/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full overflow-hidden border border-white/40 shadow-inner flex items-center justify-center \".concat(token!==null&&token!==void 0&&token.logoUrl?'bg-white dark:bg-dark-700':fallbackColor),children:token!==null&&token!==void 0&&token.logoUrl?/*#__PURE__*/_jsx(\"img\",{src:token.logoUrl,alt:\"\".concat(token.symbol,\" logo\"),className:\"w-full h-full object-cover\",loading:\"lazy\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold uppercase \".concat(fallbackTextColor),children:(_token$symbol$charAt=token===null||token===void 0?void 0:(_token$symbol=token.symbol)===null||_token$symbol===void 0?void 0:_token$symbol.charAt(0))!==null&&_token$symbol$charAt!==void 0?_token$symbol$charAt:'?'})});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-[calc(100vh-220px)] flex items-center justify-center px-4 py-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full max-w-md mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-glow bg-white dark:bg-dark-900 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-mesh opacity-30\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"heading-3\",children:\"Swap Tokens\"}),/*#__PURE__*/_jsx(\"p\",{className:\"body-small\",children:\"Trade tokens instantly with low fees\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettings(!showSettings),className:\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-800 transition-colors\",title:\"Transaction Settings\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"w-5 h-5 text-gray-600 dark:text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"})]})})]}),showSettings&&/*#__PURE__*/_jsx(\"div\",{className:\"relative mb-4\",children:/*#__PURE__*/_jsx(SlippageSettings,{onClose:()=>setShowSettings(false)})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-subtle rounded-2xl p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"body-small\",children:\"From\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"body-small\",children:[\"Balance: \",formatBalanceDisplay((_selectedTokens$from4=selectedTokens.from)===null||_selectedTokens$from4===void 0?void 0:_selectedTokens$from4.symbol)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFromSelector(true),className:\"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-dark-800 hover:bg-gray-200 dark:hover:bg-dark-700 transition-colors duration-200 min-w-fit whitespace-nowrap\",children:selectedTokens.from?/*#__PURE__*/_jsxs(_Fragment,{children:[renderTokenBadge(selectedTokens.from,'bg-primary-100 dark:bg-primary-900/20','text-primary-600 dark:text-primary-400'),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-900 dark:text-gray-100\",children:selectedTokens.from.symbol})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Select token\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputAmount,onChange:e=>setInputAmount(e.target.value),placeholder:\"0.0\",className:\"flex-1 max-w-[220px] text-right text-2xl font-semibold bg-transparent border-none outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center -my-1 relative z-10\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleTokenSwap,className:\"p-2 rounded-xl bg-white dark:bg-dark-900 border-4 border-gray-50 dark:border-dark-950 shadow-lg hover:shadow-glow transition-all duration-200 hover:rotate-180 transform hover:scale-110\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-gray-600 dark:text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-subtle rounded-2xl p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"body-small\",children:\"To\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"body-small\",children:[\"Balance: \",formatBalanceDisplay((_selectedTokens$to4=selectedTokens.to)===null||_selectedTokens$to4===void 0?void 0:_selectedTokens$to4.symbol)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowToSelector(true),className:\"flex items-center space-x-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-dark-800 hover:bg-gray-200 dark:hover:bg-dark-700 transition-colors duration-200 min-w-fit whitespace-nowrap\",children:selectedTokens.to?/*#__PURE__*/_jsxs(_Fragment,{children:[renderTokenBadge(selectedTokens.to,'bg-success-100 dark:bg-success-900/20','text-success-600 dark:text-success-400'),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-900 dark:text-gray-100\",children:selectedTokens.to.symbol})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Select token\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 max-w-[220px] text-right text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:calculating?'...':outputAmount||'0.0'})]})]})}),quote&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 glass-subtle rounded-xl p-4 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between body-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Rate:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900 dark:text-gray-100\",children:[\"1 \",(_selectedTokens$from5=selectedTokens.from)===null||_selectedTokens$from5===void 0?void 0:_selectedTokens$from5.symbol,\" = \",(quote.outputAmount/quote.inputAmount).toFixed(4),\" \",(_selectedTokens$to5=selectedTokens.to)===null||_selectedTokens$to5===void 0?void 0:_selectedTokens$to5.symbol]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between body-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Price Impact:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold \".concat(quote.priceImpact>5?'text-error-600':'text-success-600'),children:[quote.priceImpact.toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between body-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Fee:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900 dark:text-gray-100\",children:[quote.fee.toFixed(6),\" \",(_selectedTokens$from6=selectedTokens.from)===null||_selectedTokens$from6===void 0?void 0:_selectedTokens$from6.symbol]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between body-small\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Slippage Tolerance:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900 dark:text-gray-100\",children:[slippage,\"%\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSwap,disabled:disableSwap,className:\"w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center space-x-2 \".concat(disableSwap?'bg-gray-200 dark:bg-dark-800 text-gray-400 dark:text-gray-600 cursor-not-allowed':'btn-primary'),children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Swapping...\"})]}):!partyId?'Connect Wallet':insufficientBalance?'Insufficient Balance':'Swap Tokens'}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-success-500 mb-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"body-small font-medium\",children:\"24h Volume\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900 dark:text-gray-100\",children:formatCurrency(volume24h)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-primary-500 mb-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"body-small font-medium\",children:\"Avg Time\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900 dark:text-gray-100\",children:\"~2s\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-warning-500 mb-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"body-small font-medium\",children:\"Fee\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900 dark:text-gray-100\",children:\"0.3%\"})]})]})]}),/*#__PURE__*/_jsx(TokenSelector,{isOpen:showFromSelector,onClose:()=>setShowFromSelector(false),balances:legacyBalances,onSelect:token=>{setSelectedTokens({from:token});setShowFromSelector(false);},tokens:tokens,selectedToken:selectedTokens.from,type:\"from\"}),/*#__PURE__*/_jsx(TokenSelector,{isOpen:showToSelector,onClose:()=>setShowToSelector(false),balances:legacyBalances,onSelect:token=>{setSelectedTokens({to:token});setShowToSelector(false);},tokens:tokens,selectedToken:selectedTokens.to,type:\"to\"})]})});};export default SwapInterface;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}