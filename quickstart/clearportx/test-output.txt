File:     daml/AMM/Pool.daml
Hidden:   no
Range:    7:1-7:30
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/Pool.daml:7:1: warning:
    The import of â€˜DA.Actionâ€™ is redundant
      except perhaps to import instances from â€˜DA.Actionâ€™
    To import instances alone, use: import DA.Action()[0m
File:     daml/AMM/PoolAnnouncement.daml
Hidden:   no
Range:    3:1-3:31
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/PoolAnnouncement.daml:3:1: warning:
    The qualified import of â€˜AMM.Poolâ€™ is redundant
      except perhaps to import instances from â€˜AMM.Poolâ€™
    To import instances alone, use: import AMM.Pool()[0m
File:     daml/AMM/SwapRequest.daml
Hidden:   no
Range:    5:1-5:24
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/SwapRequest.daml:5:1: warning:
    The import of â€˜DA.Actionâ€™ is redundant
      except perhaps to import instances from â€˜DA.Actionâ€™
    To import instances alone, use: import DA.Action()[0m
File:     daml/AMM/RouteExecution.daml
Hidden:   no
Range:    3:1-3:34
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/RouteExecution.daml:3:1: warning:
    The qualified import of â€˜Token.Tokenâ€™ is redundant
      except perhaps to import instances from â€˜Token.Tokenâ€™
    To import instances alone, use: import Token.Token()[0m
File:     daml/AMM/RouteExecution.daml
Hidden:   no
Range:    4:1-4:31
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/RouteExecution.daml:4:1: warning:
    The qualified import of â€˜AMM.Poolâ€™ is redundant
      except perhaps to import instances from â€˜AMM.Poolâ€™
    To import instances alone, use: import AMM.Pool()[0m
File:     daml/AMM/RouteExecution.daml
Hidden:   no
Range:    5:1-5:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/RouteExecution.daml:5:1: warning:
    The qualified import of â€˜AMM.SwapRequestâ€™ is redundant
      except perhaps to import instances from â€˜AMM.SwapRequestâ€™
    To import instances alone, use: import AMM.SwapRequest()[0m
File:     daml/AMM/RouteExecution.daml
Hidden:   no
Range:    6:1-6:25
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/AMM/RouteExecution.daml:6:1: warning:
    The import of â€˜DA.Timeâ€™ is redundant
      except perhaps to import instances from â€˜DA.Timeâ€™
    To import instances alone, use: import DA.Time()[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestBoundaryConditions.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHopAdvanced.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    9:1-9:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:9:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiPool.daml
Hidden:   no
Range:    3:1-3:34
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiPool.daml:3:1: warning:
    The qualified import of â€˜Token.Tokenâ€™ is redundant
      except perhaps to import instances from â€˜Token.Tokenâ€™
    To import instances alone, use: import Token.Token()[0m
File:     daml/TestMultiPool.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiPool.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiPool.daml
Hidden:   no
Range:    7:1-7:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiPool.daml:7:1: warning:
    The qualified import of â€˜AMM.SwapRequestâ€™ is redundant
      except perhaps to import instances from â€˜AMM.SwapRequestâ€™
    To import instances alone, use: import AMM.SwapRequest()[0m
File:     daml/TestMultiHop.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHop.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiHop.daml
Hidden:   no
Range:    7:1-7:44
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHop.daml:7:1: warning:
    The qualified import of â€˜AMM.PoolAnnouncementâ€™ is redundant
      except perhaps to import instances from â€˜AMM.PoolAnnouncementâ€™
    To import instances alone, use: import AMM.PoolAnnouncement()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    6:1-6:22
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:6:1: warning:
    The import of â€˜DA.Mathâ€™ is redundant
      except perhaps to import instances from â€˜DA.Mathâ€™
    To import instances alone, use: import DA.Math()[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHopAdvanced.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestSwapProposal.daml
Hidden:   no
Range:    11:1-11:21
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestSwapProposal:96:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestSwapProposal:21:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestSwapProposal:38:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestSwapProposal:44:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestSwapProposal:52:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestSwapProposal:64:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestSwapProposal:88:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000

Trace: 
  "Initial setup complete: Pool has 10 ETH and 20000 USDC, Alice has 100 USDC"
  "TX 1 complete: SwapRequest created"
  "TX 2 complete: Alice transferred 100 USDC to pool, SwapReady created"[0m
File:     daml/TestAMMEdgeCases.daml
Hidden:   no
Range:    188:1-188:21
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMEdgeCases:253:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMEdgeCases:196:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMEdgeCases:211:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMEdgeCases:217:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMEdgeCases:224:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMEdgeCases:233:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMEdgeCases:252:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMEdgeCases.daml
Hidden:   no
Range:    188:1-188:21
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMEdgeCases:253:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMEdgeCases:196:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMEdgeCases:211:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMEdgeCases:217:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMEdgeCases:224:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMEdgeCases:233:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMEdgeCases:252:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMEdgeCases.daml
Hidden:   no
Range:    101:1-101:14
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMEdgeCases:167:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message =
                            "Swap too large (max 10% of pool reserve per transaction)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMEdgeCases:109:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMEdgeCases:125:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMEdgeCases:131:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMEdgeCases:138:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 10000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMEdgeCases:147:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 10000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMEdgeCases:166:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 10000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 10000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMEdgeCases.daml
Hidden:   no
Range:    188:1-188:21
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMEdgeCases:253:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMEdgeCases:196:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMEdgeCases:211:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMEdgeCases:217:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMEdgeCases:224:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMEdgeCases:233:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMEdgeCases:252:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMEdgeCases.daml
Hidden:   no
Range:    101:1-101:14
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMEdgeCases:167:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message =
                            "Swap too large (max 10% of pool reserve per transaction)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMEdgeCases:109:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMEdgeCases:125:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMEdgeCases:131:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMEdgeCases:138:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 10000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMEdgeCases:147:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 10000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMEdgeCases:166:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 10000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 10000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMEdgeCases.daml
Hidden:   no
Range:    14:1-14:16
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMEdgeCases:84:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMEdgeCases:24:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 1000.0000000000;
                       reserveB = 2000000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMEdgeCases:40:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 1000.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMEdgeCases:46:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 2000000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMEdgeCases:53:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 0.0100000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMEdgeCases:63:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 0.0100000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMEdgeCases:83:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 0.0100000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 0.0100000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 0.0100000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    301:1-301:20
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:369:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:309:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:327:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:333:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:340:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:349:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:368:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    301:1-301:20
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:369:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:309:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:327:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:333:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:340:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:349:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:368:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    122:1-122:16
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:204:20:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:132:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:150:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:156:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:164:16)
  #3:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:171:14)
  #4:0
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 5000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:181:23)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 6 1970-01-01T00:00:00Z (TestAMMMath:203:21)
  #6:0
  â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
  â””â”€> 'Alice' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    14:1-14:20
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:84:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:22:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:42:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:48:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:55:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:64:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:83:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    301:1-301:20
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:369:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:309:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:327:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:333:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:340:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:349:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:368:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    122:1-122:16
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:204:20:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:132:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:150:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:156:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:164:16)
  #3:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:171:14)
  #4:0
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 5000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:181:23)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 6 1970-01-01T00:00:00Z (TestAMMMath:203:21)
  #6:0
  â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
  â””â”€> 'Alice' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    411:1-411:23
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:477:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:419:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:434:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:440:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:447:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:457:19)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:476:17)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    14:1-14:20
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:84:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:22:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:42:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:48:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:55:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:64:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:83:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    301:1-301:20
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:369:23:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:309:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:327:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:333:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:340:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:349:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:368:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestAMMMath.daml
Hidden:   no
Range:    122:1-122:16
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestAMMMath:204:20:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestAMMMath:132:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 10.0000000000;
                       reserveB = 20000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestAMMMath:150:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestAMMMath:156:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestAMMMath:164:16)
  #3:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestAMMMath:171:14)
  #4:0
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 5000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestAMMMath:181:23)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 6 1970-01-01T00:00:00Z (TestAMMMath:203:21)
  #6:0
  â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
  â””â”€> 'Alice' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestLiquidityAdvanced.daml
Hidden:   no
Range:    313:1-313:14
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestLiquidityAdvanced:405:21:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #8:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #4:0; poolTokenBCid = #5:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #8:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #4:0; poolTokenBCid = #5:0
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestLiquidityAdvanced:323:12)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestLiquidityAdvanced:342:16)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestLiquidityAdvanced:348:17)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestLiquidityAdvanced:354:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 10.0000000000;
                                   amountB = 20000.0000000000;
                                   minLPTokens = 400.0000000000;
                                   deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 20000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 20000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 447.2135955156
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 447.2135955156;
                           reserveA = 10.0000000000;
                           reserveB = 20000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestLiquidityAdvanced:366:15)
  #4:0
  â”‚   disclosed to (since): 'IssuerETH' (4), 'PoolParty' (4)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestLiquidityAdvanced:372:16)
  #5:0
  â”‚   disclosed to (since): 'IssuerUSDC' (5), 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestLiquidityAdvanced:378:14)
  #6:0
  â”‚   consumed by: #8:3
  â”‚   referenced by #8:1, #8:3
  â”‚   disclosed to (since): 'Bob' (6), 'IssuerUSDC' (6)
  â”‚   divulged to (since): 'PoolParty' (8)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestLiquidityAdvanced:384:15)
  #7:0
  â”‚   consumed by: #8:0
  â”‚   referenced by #8:0
  â”‚   disclosed to (since): 'Bob' (7), 'PoolParty' (7)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 120000000);
              inputTokenCid = #6:0;
              inputSymbol = "USDC";
              inputAmount = 1000.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0400000000;
              deadline = 1970-01-01T00:01:00Z;
              maxPriceImpactBps = 10000
  
  TX 8 1970-01-01T00:00:00Z (TestLiquidityAdvanced:403:17)
  #8:0
  â”‚   disclosed to (since): 'Bob' (8), 'PoolParty' (8)
  â””â”€> 'Bob' exercises PrepareSwap on #7:0 (AMM.SwapRequest:SwapRequest)
      children:
      #8:1
      â”‚   disclosed to (since): 'Bob' (8), 'PoolParty' (8),
                                'IssuerUSDC' (8)
      â””â”€> 'Bob' exercises Transfer on #6:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #8:2
          â”‚   disclosed to (since): 'Bob' (8), 'PoolParty' (8),
                                    'IssuerUSDC' (8)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #8:3
          â”‚   disclosed to (since): 'Bob' (8), 'PoolParty' (8),
                                    'IssuerUSDC' (8)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #8:4
      â”‚   disclosed to (since): 'Bob' (8), 'PoolParty' (8)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 120000000);
                  inputSymbol = "USDC";
                  inputAmount = 1000.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0400000000;
                  deadline = 1970-01-01T00:01:00Z;
                  maxPriceImpactBps = 10000

Trace: 
  "Step 1: Alice added liquidity \10003"[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    260:1-260:29
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:304:21:
  Aborted:  Expected submit to fail but it succeeded

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Sub-transactions:
     0
     â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
                 with
                   trader = 'Alice';
                   poolCid = #0:0;
                   poolParty = 'PoolParty';
                   poolOperator = 'PoolOperator';
                   issuerA = 'IssuerETH';
                   issuerB = 'IssuerUSDC';
                   symbolA = "ETH";
                   symbolB = "USDC";
                   feeBps = 30;
                   maxTTL =
                     (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                        microseconds = 7200000000);
                   inputTokenCid = #3:0;
                   inputSymbol = "ETH";
                   inputAmount = 15.0000000000;
                   outputSymbol = "USDC";
                   minOutput = 0.0000000000;
                   deadline = 1970-01-01T01:00:00Z;
                   maxPriceImpactBps = 10000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:270:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:285:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:291:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:297:15)
  #3:0
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 15.0000000000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestBoundaryConditions.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    440:1-440:25
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:506:20:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.5039726961;
      updatedReserveB = 201000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.4960273039
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.5039726961
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.4960273039
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.5039726961;
                           updatedReserveB = 201000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:450:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:465:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:471:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:477:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestBoundaryConditions:484:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 1000
  
  TX 5 1970-01-01T00:00:00Z (TestBoundaryConditions:503:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 1000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    260:1-260:29
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:304:21:
  Aborted:  Expected submit to fail but it succeeded

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Sub-transactions:
     0
     â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
                 with
                   trader = 'Alice';
                   poolCid = #0:0;
                   poolParty = 'PoolParty';
                   poolOperator = 'PoolOperator';
                   issuerA = 'IssuerETH';
                   issuerB = 'IssuerUSDC';
                   symbolA = "ETH";
                   symbolB = "USDC";
                   feeBps = 30;
                   maxTTL =
                     (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                        microseconds = 7200000000);
                   inputTokenCid = #3:0;
                   inputSymbol = "ETH";
                   inputAmount = 15.0000000000;
                   outputSymbol = "USDC";
                   minOutput = 0.0000000000;
                   deadline = 1970-01-01T01:00:00Z;
                   maxPriceImpactBps = 10000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:270:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:285:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:291:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:297:15)
  #3:0
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 15.0000000000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestBoundaryConditions.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    440:1-440:25
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:506:20:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.5039726961;
      updatedReserveB = 201000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.4960273039
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.5039726961
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.4960273039
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.5039726961;
                           updatedReserveB = 201000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:450:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:465:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:471:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:477:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestBoundaryConditions:484:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 1000
  
  TX 5 1970-01-01T00:00:00Z (TestBoundaryConditions:503:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 1000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    171:1-171:32
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:245:21:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 110.0000000000;
      updatedReserveB = 181867.7821223970
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:5 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #2:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 18132.2178776030
             children:
             3
             â””â”€> 'IssuerUSDC' creates Token.Token:Token
                              with
                                issuer = 'IssuerUSDC';
                                owner = 'PoolParty';
                                symbol = "USDC";
                                amount = 181867.7821223970
             
             4
             â””â”€> 'IssuerUSDC' creates Token.Token:Token
                              with
                                issuer = 'IssuerUSDC';
                                owner = 'Alice';
                                symbol = "USDC";
                                amount = 18132.2178776030
             
             5
             â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 110.0000000000;
                           updatedReserveB = 181867.7821223970

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:183:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:198:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:204:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:218:15)
  #3:0
  â”‚   consumed by: #5:4
  â”‚   referenced by #5:1, #5:4
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerETH' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 15.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestBoundaryConditions:224:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "ETH";
                inputAmount = 10.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestBoundaryConditions:243:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerETH' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerETH' (5)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'Alice';
                            symbol = "ETH";
                            amount = 5.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerETH' (5)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #5:4
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerETH' (5)
          â””â”€> 'IssuerETH' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:5
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "ETH";
                    inputAmount = 10.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    260:1-260:29
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:304:21:
  Aborted:  Expected submit to fail but it succeeded

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Sub-transactions:
     0
     â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
                 with
                   trader = 'Alice';
                   poolCid = #0:0;
                   poolParty = 'PoolParty';
                   poolOperator = 'PoolOperator';
                   issuerA = 'IssuerETH';
                   issuerB = 'IssuerUSDC';
                   symbolA = "ETH";
                   symbolB = "USDC";
                   feeBps = 30;
                   maxTTL =
                     (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                        microseconds = 7200000000);
                   inputTokenCid = #3:0;
                   inputSymbol = "ETH";
                   inputAmount = 15.0000000000;
                   outputSymbol = "USDC";
                   minOutput = 0.0000000000;
                   deadline = 1970-01-01T01:00:00Z;
                   maxPriceImpactBps = 10000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:270:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:285:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:291:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:297:15)
  #3:0
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 15.0000000000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestBoundaryConditions.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    13:1-13:25
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:80:20:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 90.9338910612;
      updatedReserveB = 220000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 9.0661089388
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 90.9338910612
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 9.0661089388
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 90.9338910612;
                           updatedReserveB = 220000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:24:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:39:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:45:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:52:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestBoundaryConditions:58:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 20000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestBoundaryConditions:77:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 20000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 20000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 20000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    440:1-440:25
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:506:20:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.5039726961;
      updatedReserveB = 201000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.4960273039
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.5039726961
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.4960273039
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.5039726961;
                           updatedReserveB = 201000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:450:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:465:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:471:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:477:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestBoundaryConditions:484:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 1000
  
  TX 5 1970-01-01T00:00:00Z (TestBoundaryConditions:503:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 1000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    171:1-171:32
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:245:21:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 110.0000000000;
      updatedReserveB = 181867.7821223970
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:5 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #2:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 18132.2178776030
             children:
             3
             â””â”€> 'IssuerUSDC' creates Token.Token:Token
                              with
                                issuer = 'IssuerUSDC';
                                owner = 'PoolParty';
                                symbol = "USDC";
                                amount = 181867.7821223970
             
             4
             â””â”€> 'IssuerUSDC' creates Token.Token:Token
                              with
                                issuer = 'IssuerUSDC';
                                owner = 'Alice';
                                symbol = "USDC";
                                amount = 18132.2178776030
             
             5
             â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 110.0000000000;
                           updatedReserveB = 181867.7821223970

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:183:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:198:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:204:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:218:15)
  #3:0
  â”‚   consumed by: #5:4
  â”‚   referenced by #5:1, #5:4
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerETH' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 15.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestBoundaryConditions:224:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "ETH";
                inputAmount = 10.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestBoundaryConditions:243:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerETH' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerETH' (5)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'Alice';
                            symbol = "ETH";
                            amount = 5.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerETH' (5)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #5:4
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerETH' (5)
          â””â”€> 'IssuerETH' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:5
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "ETH";
                    inputAmount = 10.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    260:1-260:29
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestBoundaryConditions:304:21:
  Aborted:  Expected submit to fail but it succeeded

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Sub-transactions:
     0
     â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
                 with
                   trader = 'Alice';
                   poolCid = #0:0;
                   poolParty = 'PoolParty';
                   poolOperator = 'PoolOperator';
                   issuerA = 'IssuerETH';
                   issuerB = 'IssuerUSDC';
                   symbolA = "ETH";
                   symbolB = "USDC";
                   feeBps = 30;
                   maxTTL =
                     (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                        microseconds = 7200000000);
                   inputTokenCid = #3:0;
                   inputSymbol = "ETH";
                   inputAmount = 15.0000000000;
                   outputSymbol = "USDC";
                   minOutput = 0.0000000000;
                   deadline = 1970-01-01T01:00:00Z;
                   maxPriceImpactBps = 10000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestBoundaryConditions:270:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestBoundaryConditions:285:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestBoundaryConditions:291:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestBoundaryConditions:297:15)
  #3:0
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 15.0000000000[0m
File:     daml/TestBoundaryConditions.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestBoundaryConditions.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    226:1-226:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:279:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:241:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:251:15)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:270:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHopAdvanced.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    226:1-226:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:279:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:241:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:251:15)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:270:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    326:1-326:24
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:385:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #3:4; poolTokenBCid = #14:2
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #3:4; poolTokenBCid = #14:2
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'LPIssuer' (0), 'IssuerETH' (0), 'IssuerDAI' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerETH';
                       symbolA = "DAI";
                       symbolB = "ETH";
                       feeBps = 30;
                       poolId = "DAI-ETH";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerDAI' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'Alice' (2), 'IssuerETH' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerDAI' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 200000.0000000000;
                                    amountB = 100.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty1';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerDAI' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerETH' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-ETH";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerETH';
                           symbolA = "DAI";
                           symbolB = "ETH";
                           feeBps = 30;
                           poolId = "DAI-ETH";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 200000.0000000000;
                           reserveB = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerETH' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerETH' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerETH' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 100.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty2';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerETH' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #8:0
  â”‚   consumed by: #11:0
  â”‚   referenced by #11:0
  â”‚   disclosed to (since): 'PoolOperator' (8), 'IssuerUSDC' (8),
                            'LPIssuer' (8), 'IssuerDAI' (8), 'PoolParty3' (8)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty3';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #9:0
  â”‚   consumed by: #11:5
  â”‚   referenced by #11:1, #11:3, #11:5
  â”‚   disclosed to (since): 'Alice' (9), 'IssuerDAI' (9)
  â”‚   divulged to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                           'LPIssuer' (11), 'PoolParty3' (11)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #10:0
  â”‚   consumed by: #11:8
  â”‚   referenced by #11:2, #11:6, #11:8
  â”‚   disclosed to (since): 'IssuerUSDC' (10), 'Alice' (10)
  â”‚   divulged to (since): 'PoolOperator' (11), 'LPIssuer' (11),
                           'PoolParty3' (11), 'IssuerDAI' (11)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 11 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #11:0
  â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                            'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty3' exercise AddLiquidity on #8:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #9:0;
                                    tokenBCid = #10:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #11:1
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #9:0 (Token.Token:Token)
      
      #11:2
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #10:0 (Token.Token:Token)
      
      #11:3
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #9:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:4
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty3';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #11:5
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' exercises Archive on #9:0 (Token.Token:Token)
      
      #11:6
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #10:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:7
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty3';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #11:8
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerUSDC' exercises Archive on #10:0 (Token.Token:Token)
      
      #11:9
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #11:10
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty3';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 12 1970-01-01T00:00:00Z (TestMultiHopAdvanced:351:15)
  #12:0
  â”‚   consumed by: #14:3
  â”‚   referenced by #14:1, #14:3
  â”‚   disclosed to (since): 'Alice' (12), 'IssuerETH' (12)
  â”‚   divulged to (since): 'PoolParty1' (14)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 13 1970-01-01T00:00:00Z (TestMultiHopAdvanced:357:15)
  #13:0
  â”‚   consumed by: #14:0
  â”‚   referenced by #14:0
  â”‚   disclosed to (since): 'Alice' (13), 'PoolParty1' (13)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerDAI';
                issuerB = 'IssuerETH';
                symbolA = "DAI";
                symbolB = "ETH";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #12:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "DAI";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 14 1970-01-01T00:00:00Z (TestMultiHopAdvanced:376:17)
  #14:0
  â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
  â””â”€> 'Alice' exercises PrepareSwap on #13:0 (AMM.SwapRequest:SwapRequest)
      children:
      #14:1
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                'IssuerETH' (14)
      â””â”€> 'Alice' exercises Transfer on #12:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #14:2
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #14:3
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' exercises Archive on #12:0 (Token.Token:Token)
      
      #14:4
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerDAI';
                    issuerB = 'IssuerETH';
                    symbolA = "DAI";
                    symbolB = "ETH";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "DAI";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHopAdvanced.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    487:1-487:26
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:542:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 10.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 10.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 10.0000000000;
                                    amountB = 10.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 10.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 10.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 10.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 10.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 10.0000000001
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 10.0000000001;
                           reserveA = 10.0000000000;
                           reserveB = 10.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:504:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:514:15)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:533:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    226:1-226:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:279:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:241:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:251:15)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:270:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    326:1-326:24
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:385:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #3:4; poolTokenBCid = #14:2
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #3:4; poolTokenBCid = #14:2
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'LPIssuer' (0), 'IssuerETH' (0), 'IssuerDAI' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerETH';
                       symbolA = "DAI";
                       symbolB = "ETH";
                       feeBps = 30;
                       poolId = "DAI-ETH";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerDAI' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'Alice' (2), 'IssuerETH' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerDAI' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 200000.0000000000;
                                    amountB = 100.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty1';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerDAI' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerETH' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-ETH";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerETH';
                           symbolA = "DAI";
                           symbolB = "ETH";
                           feeBps = 30;
                           poolId = "DAI-ETH";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 200000.0000000000;
                           reserveB = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerETH' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerETH' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerETH' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 100.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty2';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerETH' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #8:0
  â”‚   consumed by: #11:0
  â”‚   referenced by #11:0
  â”‚   disclosed to (since): 'PoolOperator' (8), 'IssuerUSDC' (8),
                            'LPIssuer' (8), 'IssuerDAI' (8), 'PoolParty3' (8)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty3';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #9:0
  â”‚   consumed by: #11:5
  â”‚   referenced by #11:1, #11:3, #11:5
  â”‚   disclosed to (since): 'Alice' (9), 'IssuerDAI' (9)
  â”‚   divulged to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                           'LPIssuer' (11), 'PoolParty3' (11)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #10:0
  â”‚   consumed by: #11:8
  â”‚   referenced by #11:2, #11:6, #11:8
  â”‚   disclosed to (since): 'IssuerUSDC' (10), 'Alice' (10)
  â”‚   divulged to (since): 'PoolOperator' (11), 'LPIssuer' (11),
                           'PoolParty3' (11), 'IssuerDAI' (11)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 11 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #11:0
  â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                            'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty3' exercise AddLiquidity on #8:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #9:0;
                                    tokenBCid = #10:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #11:1
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #9:0 (Token.Token:Token)
      
      #11:2
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #10:0 (Token.Token:Token)
      
      #11:3
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #9:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:4
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty3';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #11:5
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' exercises Archive on #9:0 (Token.Token:Token)
      
      #11:6
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #10:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:7
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty3';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #11:8
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerUSDC' exercises Archive on #10:0 (Token.Token:Token)
      
      #11:9
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #11:10
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty3';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 12 1970-01-01T00:00:00Z (TestMultiHopAdvanced:351:15)
  #12:0
  â”‚   consumed by: #14:3
  â”‚   referenced by #14:1, #14:3
  â”‚   disclosed to (since): 'Alice' (12), 'IssuerETH' (12)
  â”‚   divulged to (since): 'PoolParty1' (14)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 13 1970-01-01T00:00:00Z (TestMultiHopAdvanced:357:15)
  #13:0
  â”‚   consumed by: #14:0
  â”‚   referenced by #14:0
  â”‚   disclosed to (since): 'Alice' (13), 'PoolParty1' (13)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerDAI';
                issuerB = 'IssuerETH';
                symbolA = "DAI";
                symbolB = "ETH";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #12:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "DAI";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 14 1970-01-01T00:00:00Z (TestMultiHopAdvanced:376:17)
  #14:0
  â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
  â””â”€> 'Alice' exercises PrepareSwap on #13:0 (AMM.SwapRequest:SwapRequest)
      children:
      #14:1
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                'IssuerETH' (14)
      â””â”€> 'Alice' exercises Transfer on #12:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #14:2
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #14:3
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' exercises Archive on #12:0 (Token.Token:Token)
      
      #14:4
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerDAI';
                    issuerB = 'IssuerETH';
                    symbolA = "DAI";
                    symbolB = "ETH";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "DAI";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHopAdvanced.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    19:1-19:24
Source:   Core to Daml-LF
Severity: DsWarning
Message: 
[0;93mUsed tuple of size 6. Daml only has Show, Eq, Ord instances for tuples of size <= 5.[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    487:1-487:26
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:542:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 10.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 10.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 10.0000000000;
                                    amountB = 10.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 10.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 10.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 10.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 10.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 10.0000000001
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 10.0000000001;
                           reserveA = 10.0000000000;
                           reserveB = 10.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:504:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:514:15)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:533:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    226:1-226:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:279:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:241:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:251:15)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:270:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    326:1-326:24
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:385:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #3:4; poolTokenBCid = #14:2
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #3:4; poolTokenBCid = #14:2
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'LPIssuer' (0), 'IssuerETH' (0), 'IssuerDAI' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerETH';
                       symbolA = "DAI";
                       symbolB = "ETH";
                       feeBps = 30;
                       poolId = "DAI-ETH";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerDAI' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'Alice' (2), 'IssuerETH' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerDAI' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 200000.0000000000;
                                    amountB = 100.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty1';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerDAI' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
          â””â”€> 'IssuerETH' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-ETH";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3), 'IssuerDAI' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerETH';
                           symbolA = "DAI";
                           symbolB = "ETH";
                           feeBps = 30;
                           poolId = "DAI-ETH";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 200000.0000000000;
                           reserveB = 100.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerETH' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerETH' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerETH' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 100.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty2';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerETH' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerETH' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #8:0
  â”‚   consumed by: #11:0
  â”‚   referenced by #11:0
  â”‚   disclosed to (since): 'PoolOperator' (8), 'IssuerUSDC' (8),
                            'LPIssuer' (8), 'IssuerDAI' (8), 'PoolParty3' (8)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty3';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #9:0
  â”‚   consumed by: #11:5
  â”‚   referenced by #11:1, #11:3, #11:5
  â”‚   disclosed to (since): 'Alice' (9), 'IssuerDAI' (9)
  â”‚   divulged to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                           'LPIssuer' (11), 'PoolParty3' (11)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #10:0
  â”‚   consumed by: #11:8
  â”‚   referenced by #11:2, #11:6, #11:8
  â”‚   disclosed to (since): 'IssuerUSDC' (10), 'Alice' (10)
  â”‚   divulged to (since): 'PoolOperator' (11), 'LPIssuer' (11),
                           'PoolParty3' (11), 'IssuerDAI' (11)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 11 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #11:0
  â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                            'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty3' exercise AddLiquidity on #8:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #9:0;
                                    tokenBCid = #10:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #11:1
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #9:0 (Token.Token:Token)
      
      #11:2
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #10:0 (Token.Token:Token)
      
      #11:3
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #9:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:4
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty3';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #11:5
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' exercises Archive on #9:0 (Token.Token:Token)
      
      #11:6
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #10:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:7
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty3';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #11:8
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerUSDC' exercises Archive on #10:0 (Token.Token:Token)
      
      #11:9
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #11:10
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerUSDC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty3';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 12 1970-01-01T00:00:00Z (TestMultiHopAdvanced:351:15)
  #12:0
  â”‚   consumed by: #14:3
  â”‚   referenced by #14:1, #14:3
  â”‚   disclosed to (since): 'Alice' (12), 'IssuerETH' (12)
  â”‚   divulged to (since): 'PoolParty1' (14)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 13 1970-01-01T00:00:00Z (TestMultiHopAdvanced:357:15)
  #13:0
  â”‚   consumed by: #14:0
  â”‚   referenced by #14:0
  â”‚   disclosed to (since): 'Alice' (13), 'PoolParty1' (13)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerDAI';
                issuerB = 'IssuerETH';
                symbolA = "DAI";
                symbolB = "ETH";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #12:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "DAI";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 14 1970-01-01T00:00:00Z (TestMultiHopAdvanced:376:17)
  #14:0
  â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
  â””â”€> 'Alice' exercises PrepareSwap on #13:0 (AMM.SwapRequest:SwapRequest)
      children:
      #14:1
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                'IssuerETH' (14)
      â””â”€> 'Alice' exercises Transfer on #12:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #14:2
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #14:3
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' exercises Archive on #12:0 (Token.Token:Token)
      
      #14:4
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerDAI';
                    issuerB = 'IssuerETH';
                    symbolA = "DAI";
                    symbolB = "ETH";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "DAI";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    73:1-73:18
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHopAdvanced:136:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #14:2; poolTokenBCid = #3:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #14:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #14:2; poolTokenBCid = #3:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'IssuerUSDC' (3), 'LPIssuer' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                           'LPIssuer' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #3:0
  â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                            'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #1:0;
                                    tokenBCid = #2:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                    'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'PoolOperator' (3), 'PoolParty1' (3),
                                'IssuerUSDC' (3), 'LPIssuer' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #4:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'IssuerUSDC' (4),
                            'PoolParty2' (4), 'LPIssuer' (4), 'IssuerDAI' (4)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #4:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHopAdvanced:27:11)
  #8:0
  â”‚   consumed by: #11:0
  â”‚   referenced by #11:0
  â”‚   disclosed to (since): 'PoolOperator' (8), 'IssuerWBTC' (8),
                            'LPIssuer' (8), 'IssuerDAI' (8), 'PoolParty3' (8)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty3';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerWBTC';
                       symbolA = "DAI";
                       symbolB = "WBTC";
                       feeBps = 30;
                       poolId = "DAI-WBTC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHopAdvanced:43:13)
  #9:0
  â”‚   consumed by: #11:5
  â”‚   referenced by #11:1, #11:3, #11:5
  â”‚   disclosed to (since): 'Alice' (9), 'IssuerDAI' (9)
  â”‚   divulged to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                           'LPIssuer' (11), 'PoolParty3' (11)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHopAdvanced:49:13)
  #10:0
  â”‚   consumed by: #11:8
  â”‚   referenced by #11:2, #11:6, #11:8
  â”‚   disclosed to (since): 'IssuerWBTC' (10), 'Alice' (10)
  â”‚   divulged to (since): 'PoolOperator' (11), 'LPIssuer' (11),
                           'PoolParty3' (11), 'IssuerDAI' (11)
  â””â”€> 'IssuerWBTC' creates Token.Token:Token
                   with
                     issuer = 'IssuerWBTC';
                     owner = 'Alice';
                     symbol = "WBTC";
                     amount = 10.0000000000
  
  TX 11 1970-01-01T00:00:00Z (TestMultiHopAdvanced:59:29)
  #11:0
  â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                            'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty3' exercise AddLiquidity on #8:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #9:0;
                                    tokenBCid = #10:0;
                                    amountA = 200000.0000000000;
                                    amountB = 10.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #11:1
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #9:0 (Token.Token:Token)
      
      #11:2
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' fetches #10:0 (Token.Token:Token)
      
      #11:3
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #9:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 200000.0000000000
          children:
          #11:4
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty3';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #11:5
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerDAI' exercises Archive on #9:0 (Token.Token:Token)
      
      #11:6
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'Alice' exercises Transfer on #10:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty3'; qty = 10.0000000000
          children:
          #11:7
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerWBTC' creates Token.Token:Token
                           with
                             issuer = 'IssuerWBTC';
                             owner = 'PoolParty3';
                             symbol = "WBTC";
                             amount = 10.0000000000
          
          #11:8
          â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                    'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11),
                                    'IssuerDAI' (11)
          â””â”€> 'IssuerWBTC' exercises Archive on #10:0 (Token.Token:Token)
      
      #11:9
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-WBTC";
                       amount = 1414.2135622852
      
      #11:10
      â”‚   disclosed to (since): 'PoolOperator' (11), 'IssuerWBTC' (11),
                                'LPIssuer' (11), 'PoolParty3' (11), 'Alice' (11), 'IssuerDAI' (11)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty3';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerWBTC';
                           symbolA = "DAI";
                           symbolB = "WBTC";
                           feeBps = 30;
                           poolId = "DAI-WBTC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 1414.2135622852;
                           reserveA = 200000.0000000000;
                           reserveB = 10.0000000000
  
  TX 12 1970-01-01T00:00:00Z (TestMultiHopAdvanced:97:15)
  #12:0
  â”‚   consumed by: #14:3
  â”‚   referenced by #14:1, #14:3
  â”‚   disclosed to (since): 'Alice' (12), 'IssuerETH' (12)
  â”‚   divulged to (since): 'PoolParty1' (14)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 13 1970-01-01T00:00:00Z (TestMultiHopAdvanced:107:15)
  #13:0
  â”‚   consumed by: #14:0
  â”‚   referenced by #14:0
  â”‚   disclosed to (since): 'Alice' (13), 'PoolParty1' (13)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #12:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 14 1970-01-01T00:00:00Z (TestMultiHopAdvanced:126:17)
  #14:0
  â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
  â””â”€> 'Alice' exercises PrepareSwap on #13:0 (AMM.SwapRequest:SwapRequest)
      children:
      #14:1
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                'IssuerETH' (14)
      â””â”€> 'Alice' exercises Transfer on #12:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #14:2
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #14:3
          â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14),
                                    'IssuerETH' (14)
          â””â”€> 'IssuerETH' exercises Archive on #12:0 (Token.Token:Token)
      
      #14:4
      â”‚   disclosed to (since): 'Alice' (14), 'PoolParty1' (14)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHopAdvanced.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHopAdvanced.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestSecurity.daml
Hidden:   no
Range:    346:1-346:22
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestSecurity:413:18:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Input reserve must be positive"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestSecurity:355:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestSecurity:370:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestSecurity:376:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestSecurity:383:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestSecurity:392:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestSecurity:411:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestSecurity.daml
Hidden:   no
Range:    438:1-438:18
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestSecurity:529:18:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #3:4; poolTokenBCid = #6:2
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestSecurity:446:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestSecurity:462:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestSecurity:468:17)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestSecurity:477:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 100.0000000000;
                                   amountB = 200000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T00:01:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestSecurity:490:17)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Alice' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestSecurity:496:18)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #3:10;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #4:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.4000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 6 1970-01-01T00:00:00Z (TestSecurity:515:16)
  #6:0
  â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
  â””â”€> 'Alice' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Alice' exercises Transfer on #4:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Alice' (6), 'PoolParty' (6)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #3:10;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.4000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestSecurity.daml
Hidden:   no
Range:    346:1-346:22
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestSecurity:413:18:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Input reserve must be positive"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #1:0; poolTokenBCid = #2:0
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestSecurity:355:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestSecurity:370:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestSecurity:376:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestSecurity:383:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 100000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestSecurity:392:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 100000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 5 1970-01-01T00:00:00Z (TestSecurity:411:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 100000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "USDC";
                    inputAmount = 100000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    16:1-16:26
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestCriticalIntegration:106:22:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #3:10 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
    with
      updatedReserveA = 9.5251702624; updatedReserveB = 21000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #3:4 (Token.Token:Token)
                         with
                           recipient = 'Bob'; qty = 0.4748297376
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 9.5251702624
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Bob';
                               symbol = "ETH";
                               amount = 0.4748297376
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #3:4 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 9.5251702624; updatedReserveB = 21000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestCriticalIntegration:30:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestCriticalIntegration:46:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestCriticalIntegration:52:16)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestCriticalIntegration:58:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 10.0000000000;
                                   amountB = 20000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T01:00:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 20000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 20000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 447.2135955156
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 7200000000);
                           totalLPSupply = 447.2135955156;
                           reserveA = 10.0000000000;
                           reserveB = 20000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestCriticalIntegration:68:14)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestCriticalIntegration:74:18)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Bob' (5), 'PoolParty' (5)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 7200000000);
              inputTokenCid = #4:0;
              inputSymbol = "USDC";
              inputAmount = 1000.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0000000000;
              deadline = 1970-01-01T01:00:00Z;
              maxPriceImpactBps = 1000
  
  TX 6 1970-01-01T00:00:00Z (TestCriticalIntegration:93:16)
  #6:0
  â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
  â””â”€> 'Bob' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Bob' exercises Transfer on #4:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 7200000000);
                  inputSymbol = "USDC";
                  inputAmount = 1000.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0000000000;
                  deadline = 1970-01-01T01:00:00Z;
                  maxPriceImpactBps = 1000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    9:1-9:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:9:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    16:1-16:26
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestCriticalIntegration:106:22:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #3:10 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
    with
      updatedReserveA = 9.5251702624; updatedReserveB = 21000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #3:4 (Token.Token:Token)
                         with
                           recipient = 'Bob'; qty = 0.4748297376
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 9.5251702624
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Bob';
                               symbol = "ETH";
                               amount = 0.4748297376
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #3:4 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 9.5251702624; updatedReserveB = 21000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestCriticalIntegration:30:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestCriticalIntegration:46:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestCriticalIntegration:52:16)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestCriticalIntegration:58:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 10.0000000000;
                                   amountB = 20000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T01:00:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 20000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 20000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 447.2135955156
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 7200000000);
                           totalLPSupply = 447.2135955156;
                           reserveA = 10.0000000000;
                           reserveB = 20000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestCriticalIntegration:68:14)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestCriticalIntegration:74:18)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Bob' (5), 'PoolParty' (5)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 7200000000);
              inputTokenCid = #4:0;
              inputSymbol = "USDC";
              inputAmount = 1000.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0000000000;
              deadline = 1970-01-01T01:00:00Z;
              maxPriceImpactBps = 1000
  
  TX 6 1970-01-01T00:00:00Z (TestCriticalIntegration:93:16)
  #6:0
  â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
  â””â”€> 'Bob' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Bob' exercises Transfer on #4:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 7200000000);
                  inputSymbol = "USDC";
                  inputAmount = 1000.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0000000000;
                  deadline = 1970-01-01T01:00:00Z;
                  maxPriceImpactBps = 1000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    305:1-305:31
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestCriticalIntegration:394:23:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #3:10 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
    with
      updatedReserveA = 97.5681147401;
      updatedReserveB = 205000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #3:4 (Token.Token:Token)
                         with
                           recipient = 'Bob'; qty = 2.4318852599
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 97.5681147401
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Bob';
                               symbol = "ETH";
                               amount = 2.4318852599
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #3:4 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 97.5681147401;
                           updatedReserveB = 205000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestCriticalIntegration:318:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestCriticalIntegration:334:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestCriticalIntegration:340:16)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestCriticalIntegration:346:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 100.0000000000;
                                   amountB = 200000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T01:00:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 7200000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestCriticalIntegration:361:14)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 5000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestCriticalIntegration:367:15)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Bob' (5), 'PoolParty' (5)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 7200000000);
              inputTokenCid = #4:0;
              inputSymbol = "USDC";
              inputAmount = 5000.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0000000000;
              deadline = 1970-01-01T01:00:00Z;
              maxPriceImpactBps = 5000
  
  TX 6 1970-01-01T00:00:00Z (TestCriticalIntegration:386:17)
  #6:0
  â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
  â””â”€> 'Bob' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Bob' exercises Transfer on #4:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 5000.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 5000.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 7200000000);
                  inputSymbol = "USDC";
                  inputAmount = 5000.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0000000000;
                  deadline = 1970-01-01T01:00:00Z;
                  maxPriceImpactBps = 5000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    9:1-9:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:9:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    16:1-16:26
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestCriticalIntegration:106:22:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #3:10 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
    with
      updatedReserveA = 9.5251702624; updatedReserveB = 21000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #3:4 (Token.Token:Token)
                         with
                           recipient = 'Bob'; qty = 0.4748297376
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 9.5251702624
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Bob';
                               symbol = "ETH";
                               amount = 0.4748297376
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #3:4 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 9.5251702624; updatedReserveB = 21000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestCriticalIntegration:30:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestCriticalIntegration:46:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestCriticalIntegration:52:16)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestCriticalIntegration:58:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 10.0000000000;
                                   amountB = 20000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T01:00:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 20000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 20000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 447.2135955156
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 7200000000);
                           totalLPSupply = 447.2135955156;
                           reserveA = 10.0000000000;
                           reserveB = 20000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestCriticalIntegration:68:14)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestCriticalIntegration:74:18)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Bob' (5), 'PoolParty' (5)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 7200000000);
              inputTokenCid = #4:0;
              inputSymbol = "USDC";
              inputAmount = 1000.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0000000000;
              deadline = 1970-01-01T01:00:00Z;
              maxPriceImpactBps = 1000
  
  TX 6 1970-01-01T00:00:00Z (TestCriticalIntegration:93:16)
  #6:0
  â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
  â””â”€> 'Bob' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Bob' exercises Transfer on #4:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 7200000000);
                  inputSymbol = "USDC";
                  inputAmount = 1000.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0000000000;
                  deadline = 1970-01-01T01:00:00Z;
                  maxPriceImpactBps = 1000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    305:1-305:31
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestCriticalIntegration:394:23:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #3:10 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
    with
      updatedReserveA = 97.5681147401;
      updatedReserveB = 205000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #3:4 (Token.Token:Token)
                         with
                           recipient = 'Bob'; qty = 2.4318852599
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 97.5681147401
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Bob';
                               symbol = "ETH";
                               amount = 2.4318852599
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #3:4 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 97.5681147401;
                           updatedReserveB = 205000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestCriticalIntegration:318:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestCriticalIntegration:334:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestCriticalIntegration:340:16)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestCriticalIntegration:346:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 100.0000000000;
                                   amountB = 200000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T01:00:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 100.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 200000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 7200000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestCriticalIntegration:361:14)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 5000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestCriticalIntegration:367:15)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Bob' (5), 'PoolParty' (5)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 7200000000);
              inputTokenCid = #4:0;
              inputSymbol = "USDC";
              inputAmount = 5000.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0000000000;
              deadline = 1970-01-01T01:00:00Z;
              maxPriceImpactBps = 5000
  
  TX 6 1970-01-01T00:00:00Z (TestCriticalIntegration:386:17)
  #6:0
  â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
  â””â”€> 'Bob' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Bob' exercises Transfer on #4:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 5000.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 5000.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 7200000000);
                  inputSymbol = "USDC";
                  inputAmount = 5000.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0000000000;
                  deadline = 1970-01-01T01:00:00Z;
                  maxPriceImpactBps = 5000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    161:1-161:29
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestCriticalIntegration:250:22:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #3:10 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
    with
      updatedReserveA = 9.7568114740; updatedReserveB = 20500.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #6:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #3:4; poolTokenBCid = #6:2
         children:
         1
         â””â”€> 'PoolParty' fetches #3:10 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #3:4 (Token.Token:Token)
                         with
                           recipient = 'Bob'; qty = 0.2431885260
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 9.7568114740
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Bob';
                               symbol = "ETH";
                               amount = 0.2431885260
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #3:4 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #3:10 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 9.7568114740; updatedReserveB = 20500.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestCriticalIntegration:174:11)
  #0:0
  â”‚   consumed by: #3:0
  â”‚   referenced by #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestCriticalIntegration:190:15)
  #1:0
  â”‚   consumed by: #3:5
  â”‚   referenced by #3:1, #3:3, #3:5
  â”‚   disclosed to (since): 'Alice' (1), 'IssuerETH' (1)
  â”‚   divulged to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                           'PoolParty' (3), 'PoolOperator' (3)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 10.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestCriticalIntegration:196:16)
  #2:0
  â”‚   consumed by: #3:8
  â”‚   referenced by #3:2, #3:6, #3:8
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'Alice' (2)
  â”‚   divulged to (since): 'LPIssuer' (3), 'PoolParty' (3),
                           'PoolOperator' (3), 'IssuerETH' (3)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 20000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestCriticalIntegration:202:23)
  #3:0
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                            'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                 with
                                   provider = 'Alice';
                                   tokenACid = #1:0;
                                   tokenBCid = #2:0;
                                   amountA = 10.0000000000;
                                   amountB = 20000.0000000000;
                                   minLPTokens = 0.0000000000;
                                   deadline = 1970-01-01T01:00:00Z
      children:
      #3:1
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #1:0 (Token.Token:Token)
      
      #3:2
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #3:3
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #1:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #3:4
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty';
                            symbol = "ETH";
                            amount = 10.0000000000
          
          #3:5
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
      
      #3:6
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 20000.0000000000
          children:
          #3:7
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 20000.0000000000
          
          #3:8
          â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                    'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3),
                                    'IssuerETH' (3)
          â””â”€> 'IssuerUSDC' exercises Archive on #2:0 (Token.Token:Token)
      
      #3:9
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 447.2135955156
      
      #3:10
      â”‚   disclosed to (since): 'IssuerUSDC' (3), 'LPIssuer' (3),
                                'PoolParty' (3), 'PoolOperator' (3), 'Alice' (3), 'IssuerETH' (3)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 7200000000);
                           totalLPSupply = 447.2135955156;
                           reserveA = 10.0000000000;
                           reserveB = 20000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestCriticalIntegration:217:14)
  #4:0
  â”‚   consumed by: #6:3
  â”‚   referenced by #6:1, #6:3
  â”‚   disclosed to (since): 'Bob' (4), 'IssuerUSDC' (4)
  â”‚   divulged to (since): 'PoolParty' (6)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Bob';
                     symbol = "USDC";
                     amount = 500.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestCriticalIntegration:223:18)
  #5:0
  â”‚   consumed by: #6:0
  â”‚   referenced by #6:0
  â”‚   disclosed to (since): 'Bob' (5), 'PoolParty' (5)
  â””â”€> 'Bob' creates AMM.SwapRequest:SwapRequest
            with
              trader = 'Bob';
              poolCid = #3:10;
              poolParty = 'PoolParty';
              poolOperator = 'PoolOperator';
              issuerA = 'IssuerETH';
              issuerB = 'IssuerUSDC';
              symbolA = "ETH";
              symbolB = "USDC";
              feeBps = 30;
              maxTTL =
                (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                   microseconds = 7200000000);
              inputTokenCid = #4:0;
              inputSymbol = "USDC";
              inputAmount = 500.0000000000;
              outputSymbol = "ETH";
              minOutput = 0.0000000000;
              deadline = 1970-01-01T01:00:00Z;
              maxPriceImpactBps = 1000
  
  TX 6 1970-01-01T00:00:00Z (TestCriticalIntegration:242:16)
  #6:0
  â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
  â””â”€> 'Bob' exercises PrepareSwap on #5:0 (AMM.SwapRequest:SwapRequest)
      children:
      #6:1
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                'IssuerUSDC' (6)
      â””â”€> 'Bob' exercises Transfer on #4:0 (Token.Token:Token)
                with
                  recipient = 'PoolParty'; qty = 500.0000000000
          children:
          #6:2
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 500.0000000000
          
          #6:3
          â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6),
                                    'IssuerUSDC' (6)
          â””â”€> 'IssuerUSDC' exercises Archive on #4:0 (Token.Token:Token)
      
      #6:4
      â”‚   disclosed to (since): 'Bob' (6), 'PoolParty' (6)
      â””â”€> 'Bob' creates AMM.SwapRequest:SwapReady
                with
                  trader = 'Bob';
                  poolCid = #3:10;
                  poolParty = 'PoolParty';
                  issuerA = 'IssuerETH';
                  issuerB = 'IssuerUSDC';
                  symbolA = "ETH";
                  symbolB = "USDC";
                  feeBps = 30;
                  maxTTL =
                    (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                       microseconds = 7200000000);
                  inputSymbol = "USDC";
                  inputAmount = 500.0000000000;
                  outputSymbol = "ETH";
                  minOutput = 0.0000000000;
                  deadline = 1970-01-01T01:00:00Z;
                  maxPriceImpactBps = 1000[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestCriticalIntegration.daml
Hidden:   no
Range:    9:1-9:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestCriticalIntegration.daml:9:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiHop.daml
Hidden:   no
Range:    29:1-29:16
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestMultiHop:156:19:
  Unhandled exception:  DA.Exception.AssertionFailed:AssertionFailed@3f4deaf145a15cdcfa762c058005e2edb9baa75bb7f95a4f8f6f937378e86415 with
                          message = "Price impact tolerance too high (max 50% allowed)"

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
    with
      poolTokenACid = #10:2; poolTokenBCid = #4:7
  Sub-transactions:
     0
     â””â”€> 'PoolParty1' exercises ExecuteSwap on #10:4 (AMM.SwapRequest:SwapReady)
                      with
                        poolTokenACid = #10:2; poolTokenBCid = #4:7
         children:
         1
         â””â”€> 'PoolParty1' fetches #4:10 (AMM.Pool:Pool)

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestMultiHop:41:12)
  #0:0
  â”‚   consumed by: #4:0
  â”‚   referenced by #4:0
  â”‚   disclosed to (since): 'PoolOperator' (0), 'PoolParty1' (0),
                            'IssuerUSDC' (0), 'LPIssuer' (0), 'IssuerETH' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty1';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestMultiHop:57:12)
  #1:0
  â”‚   consumed by: #7:0
  â”‚   referenced by #7:0
  â”‚   disclosed to (since): 'PoolOperator' (1), 'IssuerUSDC' (1),
                            'PoolParty2' (1), 'LPIssuer' (1), 'IssuerDAI' (1)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty2';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerDAI';
                       issuerB = 'IssuerUSDC';
                       symbolA = "DAI";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "DAI-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 120000000);
                       totalLPSupply = 0.0000000000;
                       reserveA = 0.0000000000;
                       reserveB = 0.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestMultiHop:73:12)
  #2:0
  â”‚   consumed by: #4:5
  â”‚   referenced by #4:1, #4:3, #4:5
  â”‚   disclosed to (since): 'Alice' (2), 'IssuerETH' (2)
  â”‚   divulged to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                           'IssuerUSDC' (4), 'LPIssuer' (4)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestMultiHop:79:14)
  #3:0
  â”‚   consumed by: #4:8
  â”‚   referenced by #4:2, #4:6, #4:8
  â”‚   disclosed to (since): 'IssuerUSDC' (3), 'Alice' (3)
  â”‚   divulged to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                           'LPIssuer' (4), 'IssuerETH' (4)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestMultiHop:88:25)
  #4:0
  â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                            'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty1' exercise AddLiquidity on #0:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #2:0;
                                    tokenBCid = #3:0;
                                    amountA = 100.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #4:1
      â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
      â””â”€> 'Alice' fetches #2:0 (Token.Token:Token)
      
      #4:2
      â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
      â””â”€> 'Alice' fetches #3:0 (Token.Token:Token)
      
      #4:3
      â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
      â””â”€> 'Alice' exercises Transfer on #2:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 100.0000000000
          children:
          #4:4
          â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                    'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 100.0000000000
          
          #4:5
          â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                    'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
          â””â”€> 'IssuerETH' exercises Archive on #2:0 (Token.Token:Token)
      
      #4:6
      â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 200000.0000000000
          children:
          #4:7
          â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                    'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty1';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #4:8
          â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                    'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #4:9
      â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "ETH-USDC";
                       amount = 4472.1359551823
      
      #4:10
      â”‚   disclosed to (since): 'PoolOperator' (4), 'PoolParty1' (4),
                                'IssuerUSDC' (4), 'LPIssuer' (4), 'Alice' (4), 'IssuerETH' (4)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty1';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerETH';
                           issuerB = 'IssuerUSDC';
                           symbolA = "ETH";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "ETH-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 4472.1359551823;
                           reserveA = 100.0000000000;
                           reserveB = 200000.0000000000
  
  TX 5 1970-01-01T00:00:00Z (TestMultiHop:98:12)
  #5:0
  â”‚   consumed by: #7:5
  â”‚   referenced by #7:1, #7:3, #7:5
  â”‚   disclosed to (since): 'Alice' (5), 'IssuerDAI' (5)
  â”‚   divulged to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                           'PoolParty2' (7), 'LPIssuer' (7)
  â””â”€> 'IssuerDAI' creates Token.Token:Token
                  with
                    issuer = 'IssuerDAI';
                    owner = 'Alice';
                    symbol = "DAI";
                    amount = 200000.0000000000
  
  TX 6 1970-01-01T00:00:00Z (TestMultiHop:104:14)
  #6:0
  â”‚   consumed by: #7:8
  â”‚   referenced by #7:2, #7:6, #7:8
  â”‚   disclosed to (since): 'IssuerUSDC' (6), 'Alice' (6)
  â”‚   divulged to (since): 'PoolOperator' (7), 'PoolParty2' (7),
                           'LPIssuer' (7), 'IssuerDAI' (7)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 7 1970-01-01T00:00:00Z (TestMultiHop:110:25)
  #7:0
  â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                            'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
  â””â”€> 'Alice',
      'LPIssuer' and 'PoolParty2' exercise AddLiquidity on #1:0 (AMM.Pool:Pool)
                                  with
                                    provider = 'Alice';
                                    tokenACid = #5:0;
                                    tokenBCid = #6:0;
                                    amountA = 200000.0000000000;
                                    amountB = 200000.0000000000;
                                    minLPTokens = 0.0000000000;
                                    deadline = 1970-01-01T00:01:00Z
      children:
      #7:1
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #5:0 (Token.Token:Token)
      
      #7:2
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' fetches #6:0 (Token.Token:Token)
      
      #7:3
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #5:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:4
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' creates Token.Token:Token
                          with
                            issuer = 'IssuerDAI';
                            owner = 'PoolParty2';
                            symbol = "DAI";
                            amount = 200000.0000000000
          
          #7:5
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerDAI' exercises Archive on #5:0 (Token.Token:Token)
      
      #7:6
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'Alice' exercises Transfer on #6:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty2'; qty = 200000.0000000000
          children:
          #7:7
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty2';
                             symbol = "USDC";
                             amount = 200000.0000000000
          
          #7:8
          â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                    'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
          â””â”€> 'IssuerUSDC' exercises Archive on #6:0 (Token.Token:Token)
      
      #7:9
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'LPIssuer' creates LPToken.LPToken:LPToken
                     with
                       issuer = 'LPIssuer';
                       owner = 'Alice';
                       poolId = "DAI-USDC";
                       amount = 200000.0000139652
      
      #7:10
      â”‚   disclosed to (since): 'PoolOperator' (7), 'IssuerUSDC' (7),
                                'PoolParty2' (7), 'LPIssuer' (7), 'Alice' (7), 'IssuerDAI' (7)
      â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                         with
                           poolOperator = 'PoolOperator';
                           poolParty = 'PoolParty2';
                           lpIssuer = 'LPIssuer';
                           issuerA = 'IssuerDAI';
                           issuerB = 'IssuerUSDC';
                           symbolA = "DAI";
                           symbolB = "USDC";
                           feeBps = 30;
                           poolId = "DAI-USDC";
                           maxTTL =
                             (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                                microseconds = 120000000);
                           totalLPSupply = 200000.0000139652;
                           reserveA = 200000.0000000000;
                           reserveB = 200000.0000000000
  
  TX 8 1970-01-01T00:00:00Z (TestMultiHop:120:15)
  #8:0
  â”‚   consumed by: #10:3
  â”‚   referenced by #10:1, #10:3
  â”‚   disclosed to (since): 'Alice' (8), 'IssuerETH' (8)
  â”‚   divulged to (since): 'PoolParty1' (10)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'Alice';
                    symbol = "ETH";
                    amount = 1.0000000000
  
  TX 9 1970-01-01T00:00:00Z (TestMultiHop:127:19)
  #9:0
  â”‚   consumed by: #10:0
  â”‚   referenced by #10:0
  â”‚   disclosed to (since): 'Alice' (9), 'PoolParty1' (9)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #4:10;
                poolParty = 'PoolParty1';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 120000000);
                inputTokenCid = #8:0;
                inputSymbol = "ETH";
                inputAmount = 1.0000000000;
                outputSymbol = "USDC";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T00:01:00Z;
                maxPriceImpactBps = 10000
  
  TX 10 1970-01-01T00:00:00Z (TestMultiHop:146:17)
  #10:0
  â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
  â””â”€> 'Alice' exercises PrepareSwap on #9:0 (AMM.SwapRequest:SwapRequest)
      children:
      #10:1
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                'IssuerETH' (10)
      â””â”€> 'Alice' exercises Transfer on #8:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty1'; qty = 1.0000000000
          children:
          #10:2
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' creates Token.Token:Token
                          with
                            issuer = 'IssuerETH';
                            owner = 'PoolParty1';
                            symbol = "ETH";
                            amount = 1.0000000000
          
          #10:3
          â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10),
                                    'IssuerETH' (10)
          â””â”€> 'IssuerETH' exercises Archive on #8:0 (Token.Token:Token)
      
      #10:4
      â”‚   disclosed to (since): 'Alice' (10), 'PoolParty1' (10)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #4:10;
                    poolParty = 'PoolParty1';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 120000000);
                    inputSymbol = "ETH";
                    inputAmount = 1.0000000000;
                    outputSymbol = "USDC";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T00:01:00Z;
                    maxPriceImpactBps = 10000[0m
File:     daml/TestMultiHop.daml
Hidden:   no
Range:    4:1-4:39
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHop.daml:4:1: warning:
    The qualified import of â€˜LPToken.LPTokenâ€™ is redundant
      except perhaps to import instances from â€˜LPToken.LPTokenâ€™
    To import instances alone, use: import LPToken.LPToken()[0m
File:     daml/TestMultiHop.daml
Hidden:   no
Range:    7:1-7:44
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestMultiHop.daml:7:1: warning:
    The qualified import of â€˜AMM.PoolAnnouncementâ€™ is redundant
      except perhaps to import instances from â€˜AMM.PoolAnnouncementâ€™
    To import instances alone, use: import AMM.PoolAnnouncement()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    126:1-126:36
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestReserveConsistency:204:24:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.7513697110;
      updatedReserveB = 200500.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #5:2
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.2486302890
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.7513697110
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.2486302890
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.7513697110;
                           updatedReserveB = 200500.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestReserveConsistency:139:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestReserveConsistency:154:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestReserveConsistency:160:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestReserveConsistency:171:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 500.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestReserveConsistency:177:15)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 500.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestReserveConsistency:196:17)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 500.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 500.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 500.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    6:1-6:22
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:6:1: warning:
    The import of â€˜DA.Mathâ€™ is redundant
      except perhaps to import instances from â€˜DA.Mathâ€™
    To import instances alone, use: import DA.Math()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    126:1-126:36
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestReserveConsistency:204:24:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.7513697110;
      updatedReserveB = 200500.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #5:2
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.2486302890
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.7513697110
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.2486302890
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.7513697110;
                           updatedReserveB = 200500.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestReserveConsistency:139:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestReserveConsistency:154:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestReserveConsistency:160:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestReserveConsistency:171:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 500.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestReserveConsistency:177:15)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 500.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestReserveConsistency:196:17)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 500.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 500.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 500.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    16:1-16:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestReserveConsistency:89:26:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.5039726961;
      updatedReserveB = 201000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.4960273039
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.5039726961
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.4960273039
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.5039726961;
                           updatedReserveB = 201000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestReserveConsistency:27:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestReserveConsistency:42:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestReserveConsistency:48:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestReserveConsistency:62:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestReserveConsistency:68:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 1000
  
  TX 5 1970-01-01T00:00:00Z (TestReserveConsistency:87:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 1000[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    6:1-6:22
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:6:1: warning:
    The import of â€˜DA.Mathâ€™ is redundant
      except perhaps to import instances from â€˜DA.Mathâ€™
    To import instances alone, use: import DA.Math()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    317:1-317:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestReserveConsistency:397:32:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 999.9950150249;
      updatedReserveB = 2000010.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #5:2
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.0049849751
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 999.9950150249
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.0049849751
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 999.9950150249;
                           updatedReserveB = 2000010.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestReserveConsistency:328:12)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 1000.0000000000;
                       reserveA = 1000.0000000000;
                       reserveB = 2000000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestReserveConsistency:344:15)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 1000.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestReserveConsistency:350:16)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 2000000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestReserveConsistency:364:22)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 10.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestReserveConsistency:370:20)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 10.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestReserveConsistency:389:22)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 10.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 10.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 10.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    126:1-126:36
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestReserveConsistency:204:24:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.7513697110;
      updatedReserveB = 200500.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #5:2
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.2486302890
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.7513697110
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.2486302890
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.7513697110;
                           updatedReserveB = 200500.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestReserveConsistency:139:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestReserveConsistency:154:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestReserveConsistency:160:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestReserveConsistency:171:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 500.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestReserveConsistency:177:15)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 500.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 5000
  
  TX 5 1970-01-01T00:00:00Z (TestReserveConsistency:196:17)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 500.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 500.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 500.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 5000[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    16:1-16:28
Source:   Script
Severity: DsError
Message: 
[0;91mScript execution failed on commit at TestReserveConsistency:89:26:
  Attempt to exercise a contract that was consumed in same transaction.
  Contract: #0:0 (AMM.Pool:Pool)

Ledger time: 1970-01-01T00:00:00Z

Partial transaction:
  Failed exercise (unknown source):
    exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
    with
      updatedReserveA = 99.5039726961;
      updatedReserveB = 201000.0000000000
  Sub-transactions:
     0
     â””â”€> 'PoolParty' exercises ExecuteSwap on #5:4 (AMM.SwapRequest:SwapReady)
                     with
                       poolTokenACid = #1:0; poolTokenBCid = #2:0
         children:
         1
         â””â”€> 'PoolParty' fetches #0:0 (AMM.Pool:Pool)
         
         2
         â””â”€> 'PoolParty' exercises Transfer on #1:0 (Token.Token:Token)
                         with
                           recipient = 'Alice'; qty = 0.4960273039
             children:
             3
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'PoolParty';
                               symbol = "ETH";
                               amount = 99.5039726961
             
             4
             â””â”€> 'IssuerETH' creates Token.Token:Token
                             with
                               issuer = 'IssuerETH';
                               owner = 'Alice';
                               symbol = "ETH";
                               amount = 0.4960273039
             
             5
             â””â”€> 'IssuerETH' exercises Archive on #1:0 (Token.Token:Token)
         
         6
         â””â”€> 'PoolParty' exercises ArchiveAndUpdateReserves on #0:0 (AMM.Pool:Pool)
                         with
                           updatedReserveA = 99.5039726961;
                           updatedReserveB = 201000.0000000000

Committed transactions: 
  TX 0 1970-01-01T00:00:00Z (TestReserveConsistency:27:11)
  #0:0
  â”‚   disclosed to (since): 'IssuerUSDC' (0), 'LPIssuer' (0),
                            'IssuerETH' (0), 'PoolParty' (0), 'PoolOperator' (0)
  â””â”€> 'PoolOperator' creates AMM.Pool:Pool
                     with
                       poolOperator = 'PoolOperator';
                       poolParty = 'PoolParty';
                       lpIssuer = 'LPIssuer';
                       issuerA = 'IssuerETH';
                       issuerB = 'IssuerUSDC';
                       symbolA = "ETH";
                       symbolB = "USDC";
                       feeBps = 30;
                       poolId = "ETH-USDC";
                       maxTTL =
                         (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                            microseconds = 7200000000);
                       totalLPSupply = 100.0000000000;
                       reserveA = 100.0000000000;
                       reserveB = 200000.0000000000
  
  TX 1 1970-01-01T00:00:00Z (TestReserveConsistency:42:14)
  #1:0
  â”‚   disclosed to (since): 'IssuerETH' (1), 'PoolParty' (1)
  â””â”€> 'IssuerETH' creates Token.Token:Token
                  with
                    issuer = 'IssuerETH';
                    owner = 'PoolParty';
                    symbol = "ETH";
                    amount = 100.0000000000
  
  TX 2 1970-01-01T00:00:00Z (TestReserveConsistency:48:15)
  #2:0
  â”‚   disclosed to (since): 'IssuerUSDC' (2), 'PoolParty' (2)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'PoolParty';
                     symbol = "USDC";
                     amount = 200000.0000000000
  
  TX 3 1970-01-01T00:00:00Z (TestReserveConsistency:62:16)
  #3:0
  â”‚   consumed by: #5:3
  â”‚   referenced by #5:1, #5:3
  â”‚   disclosed to (since): 'Alice' (3), 'IssuerUSDC' (3)
  â”‚   divulged to (since): 'PoolParty' (5)
  â””â”€> 'IssuerUSDC' creates Token.Token:Token
                   with
                     issuer = 'IssuerUSDC';
                     owner = 'Alice';
                     symbol = "USDC";
                     amount = 1000.0000000000
  
  TX 4 1970-01-01T00:00:00Z (TestReserveConsistency:68:18)
  #4:0
  â”‚   consumed by: #5:0
  â”‚   referenced by #5:0
  â”‚   disclosed to (since): 'Alice' (4), 'PoolParty' (4)
  â””â”€> 'Alice' creates AMM.SwapRequest:SwapRequest
              with
                trader = 'Alice';
                poolCid = #0:0;
                poolParty = 'PoolParty';
                poolOperator = 'PoolOperator';
                issuerA = 'IssuerETH';
                issuerB = 'IssuerUSDC';
                symbolA = "ETH";
                symbolB = "USDC";
                feeBps = 30;
                maxTTL =
                  (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                     microseconds = 7200000000);
                inputTokenCid = #3:0;
                inputSymbol = "USDC";
                inputAmount = 1000.0000000000;
                outputSymbol = "ETH";
                minOutput = 0.0000000000;
                deadline = 1970-01-01T01:00:00Z;
                maxPriceImpactBps = 1000
  
  TX 5 1970-01-01T00:00:00Z (TestReserveConsistency:87:16)
  #5:0
  â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
  â””â”€> 'Alice' exercises PrepareSwap on #4:0 (AMM.SwapRequest:SwapRequest)
      children:
      #5:1
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                'IssuerUSDC' (5)
      â””â”€> 'Alice' exercises Transfer on #3:0 (Token.Token:Token)
                  with
                    recipient = 'PoolParty'; qty = 1000.0000000000
          children:
          #5:2
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' creates Token.Token:Token
                           with
                             issuer = 'IssuerUSDC';
                             owner = 'PoolParty';
                             symbol = "USDC";
                             amount = 1000.0000000000
          
          #5:3
          â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5),
                                    'IssuerUSDC' (5)
          â””â”€> 'IssuerUSDC' exercises Archive on #3:0 (Token.Token:Token)
      
      #5:4
      â”‚   disclosed to (since): 'Alice' (5), 'PoolParty' (5)
      â””â”€> 'Alice' creates AMM.SwapRequest:SwapReady
                  with
                    trader = 'Alice';
                    poolCid = #0:0;
                    poolParty = 'PoolParty';
                    issuerA = 'IssuerETH';
                    issuerB = 'IssuerUSDC';
                    symbolA = "ETH";
                    symbolB = "USDC";
                    feeBps = 30;
                    maxTTL =
                      (DA.Time.Types:RelTime@733e38d36a2759688a4b2c4cec69d48e7b55ecc8dedc8067b815926c917a182a with
                         microseconds = 7200000000);
                    inputSymbol = "USDC";
                    inputAmount = 1000.0000000000;
                    outputSymbol = "ETH";
                    minOutput = 0.0000000000;
                    deadline = 1970-01-01T01:00:00Z;
                    maxPriceImpactBps = 1000[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    5:1-5:17
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:5:1: warning:
    The import of â€˜DA.Assertâ€™ is redundant
      except perhaps to import instances from â€˜DA.Assertâ€™
    To import instances alone, use: import DA.Assert()[0m
File:     daml/TestReserveConsistency.daml
Hidden:   no
Range:    6:1-6:22
Source:   typecheck
Severity: DsWarning
Message: 
[0;93mdaml/TestReserveConsistency.daml:6:1: warning:
    The import of â€˜DA.Mathâ€™ is redundant
      except perhaps to import instances from â€˜DA.Mathâ€™
    To import instances alone, use: import DA.Math()[0m
[4;1m
Test Summary[m

daml/Main.daml:createInitialTokens: ok, 2 active contracts, 2 transactions.
daml/TestAMMEdgeCases.daml:testSlippageProtection: ok, 5 active contracts, 7 transactions.
daml/TestAMMEdgeCases.daml:testExactBalanceSwap: failed
daml/TestAMMEdgeCases.daml:testLargeSwap: failed
daml/TestAMMEdgeCases.daml:testMinimalSwap: failed
daml/TestAMMEdgeCases.daml:testDeadlineExpired: ok, 5 active contracts, 8 transactions.
daml/TestAMMMath.daml:testFeeAccumulation: failed
daml/TestAMMMath.daml:testPriceImpact: failed
daml/TestAMMMath.daml:testConstantProduct: failed
daml/TestAMMMath.daml:testBidirectionalSwaps: failed
daml/TestBoundaryConditions.daml:testBelowMinimumLiquidity: ok, 3 active contracts, 4 transactions.
daml/TestBoundaryConditions.daml:testOver50PercentPriceImpact: failed
daml/TestBoundaryConditions.daml:testExactly1HourDeadline: failed
daml/TestBoundaryConditions.daml:testExactly50PercentPriceImpact: failed
daml/TestBoundaryConditions.daml:testJustOver10PercentSwap: ok, 5 active contracts, 7 transactions.
daml/TestBoundaryConditions.daml:testExactly10PercentSwap: failed
daml/TestBoundaryConditions.daml:testOver1HourDeadline: ok, 5 active contracts, 7 transactions.
daml/TestBoundaryConditions.daml:testExactlyMinimumLiquidity: ok, 4 active contracts, 4 transactions.
daml/TestCreate.daml:setup: ok, 1 active contracts, 1 transactions.
daml/TestCriticalIntegration.daml:testAddLiquidityAfterSwap: failed
daml/TestCriticalIntegration.daml:testFullCycleWithMultipleSwaps: failed
daml/TestCriticalIntegration.daml:testRemoveLiquidityAfterSwap: failed
daml/TestLiquidity.daml:testLPTokenTransfer: ok, 2 active contracts, 2 transactions.
daml/TestLiquidity.daml:testDeadlineEnforcementAddLP: ok, 3 active contracts, 4 transactions.
daml/TestLiquidity.daml:testDeadlineEnforcementRemoveLP: ok, 4 active contracts, 5 transactions.
daml/TestLiquidity.daml:testFirstLP: ok, 4 active contracts, 4 transactions.
daml/TestLiquidity.daml:testRemoveLiquidity: ok, 3 active contracts, 5 transactions.
daml/TestLiquidity.daml:testSlippageProtectionAddLP: ok, 3 active contracts, 4 transactions.
daml/TestLiquidity.daml:testSlippageProtectionRemoveLP: ok, 4 active contracts, 5 transactions.
daml/TestLiquidity.daml:testSubsequentLP: ok, 4 active contracts, 4 transactions.
daml/TestLiquidityAdvanced.daml:testFeeAccumulation: ok, 0 active contracts, 0 transactions.
daml/TestLiquidityAdvanced.daml:testUnauthorizedBurn: ok, 1 active contracts, 2 transactions.
daml/TestLiquidityAdvanced.daml:testDustAmounts: ok, 4 active contracts, 4 transactions.
daml/TestLiquidityAdvanced.daml:testImbalancedLiquidity: ok, 4 active contracts, 4 transactions.
daml/TestLiquidityAdvanced.daml:testMultipleLPs: ok, 10 active contracts, 10 transactions.
daml/TestLiquidityAdvanced.daml:testFullCycle: failed
daml/TestMultiHop.daml:testRouteComparison: ok, 0 active contracts, 0 transactions.
daml/TestMultiHop.daml:testMultiHopSlippage: ok, 0 active contracts, 0 transactions.
daml/TestMultiHop.daml:testTwoHopRoute: failed
daml/TestMultiHopAdvanced.daml:testLiquidityExhaustion: ok, 6 active contracts, 7 transactions.
daml/TestMultiHopAdvanced.daml:testMultiHopSlippageFailure: failed
daml/TestMultiHopAdvanced.daml:testRouteComparisonFull: failed
daml/TestMultiHopAdvanced.daml:testFailedIntermediateHop: failed
daml/TestMultiHopAdvanced.daml:testDeadlineExpiration: ok, 6 active contracts, 9 transactions.
daml/TestMultiHopAdvanced.daml:testThreeHopRoute: failed
daml/TestMultiPool.daml:testCompetingPools: ok, 4 active contracts, 4 transactions.
daml/TestMultiPool.daml:testCreateMultiplePools: ok, 6 active contracts, 6 transactions.
daml/TestMultiPool.daml:testPoolAnnouncements: ok, 1 active contracts, 1 transactions.
daml/TestMultiPool.daml:testPoolDiscovery: ok, 4 active contracts, 4 transactions.
daml/TestMultiPool.daml:testSwapAcrossPools: ok, 4 active contracts, 4 transactions.
daml/TestNoArchive.daml:testNoArchive: ok, 1 active contracts, 2 transactions.
daml/TestReserveConsistency.daml:testMultipleSwapsReserveConsistency: failed
daml/TestReserveConsistency.daml:testReservesUpdateAfterSwap: failed
daml/TestReserveConsistency.daml:testKInvariantAfter100Swaps: failed
daml/TestSecurity.daml:testNegativeAmount: ok, 0 active contracts, 1 transactions.
daml/TestSecurity.daml:testSelfTransfer: ok, 1 active contracts, 2 transactions.
daml/TestSecurity.daml:testStealPoolReserves: ok, 3 active contracts, 4 transactions.
daml/TestSecurity.daml:testStealTokens: ok, 1 active contracts, 2 transactions.
daml/TestSecurity.daml:testUnauthorizedLiquidityAdd: ok, 3 active contracts, 4 transactions.
daml/TestSecurity.daml:testZeroAmountSwap: ok, 1 active contracts, 2 transactions.
daml/TestSecurity.daml:testDoubleSpend: ok, 4 active contracts, 6 transactions.
daml/TestSecurity.daml:testExcessLiquidityRemoval: ok, 4 active contracts, 5 transactions.
daml/TestSecurity.daml:testLPSelfTransfer: ok, 1 active contracts, 2 transactions.
daml/TestSecurity.daml:testLiquidityImbalanceAttack: ok, 7 active contracts, 7 transactions.
daml/TestSecurity.daml:testUnauthorizedLPBurn: ok, 1 active contracts, 2 transactions.
daml/TestSecurity.daml:testPriceManipulation: failed
daml/TestSecurity.daml:testPoolInvariant: failed
daml/TestSpotPrice.daml:testEmptyPoolSpotPrice: ok, 1 active contracts, 2 transactions.
daml/TestSpotPrice.daml:testBasicSpotPrice: ok, 4 active contracts, 5 transactions.
daml/TestSpotPrice.daml:testDifferentPriceRatios: ok, 4 active contracts, 5 transactions.
daml/TestSpotPrice.daml:testSpotPriceAfterSwap: ok, 7 active contracts, 9 transactions.
daml/TestSpotPrice.daml:testSpotPricePrecision: ok, 4 active contracts, 5 transactions.
daml/TestSwapProposal.daml:testSwapWithProposal: failed
Modules internal to this package:
- Internal templates
  9 defined
  7 ( 77.8%) created
- Internal template choices
  28 defined
  10 ( 35.7%) exercised
- Internal interface implementations
  0 defined
    0 internal interfaces
    0 external interfaces
- Internal interface choices
  0 defined
  0 (100.0%) exercised
Modules external to this package:
- External templates
  0 defined
  0 (100.0%) created in any tests
  0 (100.0%) created in internal tests
  0 (100.0%) created in external tests
- External template choices
  0 defined
  0 (100.0%) exercised in any tests
  0 (100.0%) exercised in internal tests
  0 (100.0%) exercised in external tests
- External interface implementations
  0 defined
- External interface choices
  0 defined
  0 (100.0%) exercised in any tests
  0 (100.0%) exercised in internal tests
  0 (100.0%) exercised in external tests

