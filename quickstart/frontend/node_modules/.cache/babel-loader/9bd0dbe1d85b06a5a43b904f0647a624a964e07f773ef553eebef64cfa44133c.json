{"ast":null,"code":"import _objectSpread from\"/root/cn-quickstart/quickstart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Zustand store for caching Canton contract IDs and state\nimport{create}from'zustand';// Helper function to create pool key\nconst createPoolKey=(tokenASymbol,tokenBSymbol)=>{const sorted=[tokenASymbol,tokenBSymbol].sort();return\"\".concat(sorted[0],\"-\").concat(sorted[1]);};export const useContractStore=create((set,get)=>({// Initial state\ncache:{tokens:new Map(),pools:new Map(),lastUpdate:0},isLoadingTokens:false,isLoadingPools:false,// Set tokens in cache\nsetTokens:tokens=>{const tokenMap=new Map();tokens.forEach(token=>{if(token.contractId){tokenMap.set(token.symbol,token);}});set(state=>({cache:_objectSpread(_objectSpread({},state.cache),{},{tokens:tokenMap,lastUpdate:Date.now()}),isLoadingTokens:false}));},// Set pools in cache\nsetPools:pools=>{const poolMap=new Map();pools.forEach(pool=>{const key=createPoolKey(pool.tokenA.symbol,pool.tokenB.symbol);poolMap.set(key,pool);});set(state=>({cache:_objectSpread(_objectSpread({},state.cache),{},{pools:poolMap,lastUpdate:Date.now()}),isLoadingPools:false}));},// Get token by symbol\ngetTokenBySymbol:symbol=>{const{cache}=get();return cache.tokens.get(symbol);},// Get pool by token pair\ngetPoolByPair:(tokenASymbol,tokenBSymbol)=>{const{cache}=get();const key=createPoolKey(tokenASymbol,tokenBSymbol);return cache.pools.get(key);},// Clear entire cache\nclearCache:()=>{set({cache:{tokens:new Map(),pools:new Map(),lastUpdate:0}});},// Loading state setters\nsetLoadingTokens:loading=>{set({isLoadingTokens:loading});},setLoadingPools:loading=>{set({isLoadingPools:loading});}}));// Hook to check if cache is stale (older than 30 seconds)\nexport const useCacheStatus=()=>{const lastUpdate=useContractStore(state=>state.cache.lastUpdate);const CACHE_TTL=30000;// 30 seconds\nreturn{isStale:Date.now()-lastUpdate>CACHE_TTL,lastUpdate,age:Date.now()-lastUpdate};};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}